import{k as e,P as a,W as t,w as l,R as s,V as n,a3 as i,U as o,ak as r,j as d,a4 as u,r as c,e as m,a0 as p,a2 as v,S as _,F as h,O as x,au as f,H as k,an as w,I as g,a6 as y,l as b,v as C,o as T,b as j}from"./vue.js?v=1760428868419";import{d6 as E,w as L,_ as U,e as R,p as S}from"./page_layout.js?v=1760428868419";import{c as I,f as D,a as F,d as P,h as $,i as B,e as q}from"./public.js?v=1760428868419";import{_ as z}from"./index108.js?v=1760428868419";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1760428868419";import{d as K,g as O,e as V,a as W,b as X,c as Y}from"./term.js?v=1760428868419";import{o as A,T as G}from"./terminal2.js?v=1760428868419";import{aC as J,dR as M,au as N,da as Q,dS as Z}from"./naive.js?v=1760428868419";import{_ as ee}from"./index.js?v=1760428868419";import{_ as ae}from"./index.vue_vue_type_script_setup_true_lang.js?v=1760428868419";import"./__commonjsHelpers__.js?v=1760428868419";import"./common.js?v=1760428868419";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1760428868419";import"./xterm.js?v=1760428868419";import"./xterm-addon-canvas.js?v=1760428868419";const te=e({__name:"index",setup(e,{expose:c}){const{t:m}=a(),p=E(),{keys:v,table:_,columns:h}=I([{key:"host",title:m("Term.index_8"),ellipsis:{tooltip:{width:"trigger"}},render:e=>t("span",{class:"cursor-pointer w-100%",onClick:()=>f(e)},[e.host])},D({width:130,options:e=>[{label:m("Site.TableOP.index_7"),onClick:()=>{const a={title:m("Term.index_22"),data:{isEdit:!0,row:e}};A(a)}},{label:m("Public.Btn.Del"),onClick:()=>{F({title:m("Term.index_6"),content:m("Term.index_7",[e.host]),onConfirm:async({hide:a})=>{await K({host:e.host}),g(),a()}})}}]})]),x=()=>{const e={title:m("Term.index_19"),data:{isEdit:!1}};A(e)},f=e=>{p.server={...e,time:new Date}},{loading:k,setLoading:w}=P(),g=async()=>{try{w(!0);const{message:e}=await O();L(e)&&(_.data=e)}finally{v.value=[],w(!1)}};return g(),l(()=>p.isRefresh,e=>{e&&(p.setRefresh(!1),g())}),c({init:g}),(e,a)=>{const l=J,c=$,m=H;return n(),s("div",null,[t(m,null,{toolsLeft:i(()=>[t(l,{type:"primary",onClick:x},{default:i(()=>[d(u(e.$t("Term.index_19")),1)]),_:1})]),table:i(()=>[t(c,{"checked-row-keys":o(v),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>r(v)?v.value=e:null),loading:o(k),"max-height":"calc(100vh - 250px)",data:o(_).data,columns:o(h)},null,8,["checked-row-keys","loading","data","columns"])]),_:1})])}}}),le={class:"p-20px"},se=e({__name:"form",props:{data:{}},setup(e,{expose:l}){const{t:r}=a(),d=e,{isEdit:u,row:p,getList:v}=d.data,_=c(null),h=m({name:"",content:""}),x={name:{required:!0,message:r("Security.Conf.Index_28"),trigger:["blur","input"]},content:{required:!0,message:r("Security.Conf.Index_28"),trigger:["blur","input"]}};return u&&p&&(h.name=p.title,h.content=p.shell),l({onConfirm:async({hide:e})=>{var a;await(null==(a=_.value)?void 0:a.validate()),u?await V({shell:h.content,title:p?p.title:"",new_title:h.name}):await W({shell:h.content,title:h.name}),null==v||v(),e()}}),(e,a)=>{const l=N,r=M,d=ae;return n(),s("div",le,[t(d,{ref_key:"formRef",ref:_,model:o(h),rules:x},{default:i(()=>[t(r,{label:e.$t("Docker.Compose.form.index_3"),path:"name"},{default:i(()=>[t(l,{class:"w-280px!",value:o(h).name,"onUpdate:value":a[0]||(a[0]=e=>o(h).name=e),placeholder:e.$t("Term.idnex_1")},null,8,["value","placeholder"])]),_:1},8,["label"]),t(r,{label:e.$t("Docker.LocalImage.build_5"),path:"content"},{default:i(()=>[t(l,{class:"w-280px!",type:"textarea",rows:6,value:o(h).content,"onUpdate:value":a[1]||(a[1]=e=>o(h).content=e),placeholder:e.$t("Term.index_2")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])])}}}),ne=e({__name:"index",setup(e,{expose:l}){const{t:c}=a(),{keys:m,table:p,columns:v}=I([{key:"title",title:c("Term.index_4"),ellipsis:{tooltip:{width:"trigger"}},render:e=>t("span",{class:"cursor-pointer w-100%",onClick:()=>{_(e.shell)}},[e.title])},D({width:130,options:e=>[{label:c("Public.Btn.Copy"),onClick:()=>{_(e.shell)}},{label:c("Public.Btn.Edit"),onClick:()=>{g(e)}},{label:c("Public.Btn.Del"),onClick:()=>{F({title:c("Term.index_20"),content:c("Term.index_21",[e.title]),onConfirm:async({hide:a})=>{await X({title:e.title}),f(),a()}})}}]})]),_=e=>{B(e)},{loading:h,setLoading:x}=P(),f=async()=>{try{x(!0);const{message:e}=await Y();L(e)&&(p.data=e)}finally{m.value=[],x(!1)}},k=q(c("Term.index_3"),{isEdit:!1,getList:f}),w=()=>{k.data.isEdit=!1,k.title=c("Term.index_3"),k.show=!0},g=e=>{k.data.row=e,k.data.isEdit=!0,k.title=c("Term.index_5"),k.show=!0};return f(),l({init:f}),(e,a)=>{const l=J,c=$,_=H,x=ee;return n(),s("div",null,[t(_,null,{toolsLeft:i(()=>[t(l,{type:"primary",onClick:w},{default:i(()=>[d(u(e.$t("Term.index_3")),1)]),_:1})]),table:i(()=>[t(c,{"checked-row-keys":o(m),"onUpdate:checkedRowKeys":a[0]||(a[0]=e=>r(m)?m.value=e:null),loading:o(h),"max-height":"calc(100vh - 250px)",data:o(p).data,columns:o(v)},null,8,["checked-row-keys","loading","data","columns"])]),_:1}),t(x,{show:o(k).show,"onUpdate:show":a[1]||(a[1]=e=>o(k).show=e),title:o(k).title,data:o(k).data,width:480,footer:!0,component:se},null,8,["show","title","data"])])}}}),ie=e({__name:"index",setup(e){const{t:l}=a(),i=c("server"),d=[{key:"server",label:l("Term.index_23"),component:te},{key:"command",label:l("Term.index_24"),component:ne}];return(e,a)=>{const l=z;return n(),s("div",null,[t(l,{class:"w-300px!",value:o(i),"onUpdate:value":a[0]||(a[0]=e=>r(i)?i.value=e:null),options:d},null,8,["value"])])}}}),oe=["onClick","onContextmenu"],re=["title"],de=["onClick"],ue={class:"terminal bg-#333333"},ce=S(e({__name:"index",setup(e){const{t:r}=a(),m=E(),{isFull:T,server:j,isShow:L}=p(m),S=c([{id:"aaaaaaaaa",host:"127.0.0.1",port:22,ps:r("Database.form.index_12"),state:!0}]),I=["Copy session","Close session","Close to right","Close other"],D=c("aaaaaaaaa"),F=()=>{const e={title:r("Term.index_19"),data:{isEdit:!1}};A(e)},P=e=>{const a=R(9,"letter");S.value.push({id:a,host:e.host,port:e.port,ps:e.ps,state:!0}),setTimeout(()=>{$(a)},20)},$=e=>{D.value=e},B=(e,a)=>{S.value=S.value.map(t=>t.id===e?{...t,state:a}:t)},q=e=>{S.value=S.value.filter(a=>a.id!==e),D.value=S.value.length>0?S.value[S.value.length-1].id:"aaaaaaaaa"},z=c(!1),H=c(0),K=c(0),O=c({id:"",host:"",port:0,ps:"",state:!1});return document.addEventListener("click",()=>{z.value=!1}),l(()=>j.value,e=>{null!==e&&P(e)},{deep:!0}),(e,a)=>{const l=U,r=Q;return n(),v(r,{vertical:"",class:"gap-0!"},{default:i(()=>[t(r,{class:"head gap-0! xterm-head"},{default:i(()=>[(n(!0),s(h,null,x(o(S),e=>(n(),s("div",{key:e.id,class:k(["item",{"item-active":o(D)===e.id}]),onClick:a=>$(e.id),onContextmenu:f(a=>{return t=a,l=e,O.value=l,H.value=t.clientX,K.value=t.clientY,void(z.value=!0);var t,l},["prevent"])},[_("div",{class:"text",title:e.ps},[_("span",{class:k(["icon",{"icon-active":!e.state}])},null,2),d(u(e.ps?e.ps:e.host),1)],8,re),t(l,{name:"base-close",class:"close-terminal",size:16,onClick:f(a=>q(e.id),["stop"])},null,8,["onClick"]),o(z)?(n(),s("div",{key:0,class:"context-menu",style:g({top:o(K)-20+"px",left:o(H)-180+"px"})},[_("ul",null,[(n(),s(h,null,x(I,(e,a)=>_("li",{key:a,onClick:a=>(e=>{if(!O.value)return;let a;switch(e){case"Copy session":P(O.value);break;case"Close session":q(O.value.id);break;case"Close to right":a=S.value.findIndex(e=>e.id===O.value.id),-1!==a&&(S.value.splice(a+1),setTimeout(()=>{var e;$((null==(e=S.value[a])?void 0:e.id)||"aaaaaaaaa")},20));break;case"Close other":S.value=S.value.filter(e=>e.id===O.value.id),setTimeout(()=>{$(O.value.id)},20)}z.value=!1})(e)},u(e),9,de)),64))])],4)):w("",!0)],42,oe))),128)),_("div",{class:"add-terminal",onClick:F},[t(l,{name:"base-add",size:24})]),_("div",{class:"absolute right-0px add-terminal",onClick:a[0]||(a[0]=e=>T.value=!o(T))},[t(l,{name:"base-full",size:24})])]),_:1}),_("div",ue,[(n(),v(y,null,[(n(!0),s(h,null,x(o(S),e=>b((n(),v(G,{key:e.id,data:e,active:o(D)===e.id,onUpdateFull:$,onUpdateState:B},null,8,["data","active"])),[[C,e.id===o(D)]])),128))],1024)),_("div",{class:k(["terminal-contract-tool",{active:!o(L)}]),onClick:a[1]||(a[1]=e=>L.value=!o(L))},null,2)])]),_:1})}}}),[["__scopeId","data-v-efd124da"]]),me={class:"p-16px box"},pe=S(e({__name:"index",setup(e){const a=E(),{isShow:r,isFull:d}=p(a),u=c(null);l(()=>d.value,e=>{var a;e?(r.value=!1,null==(a=u.value)||a.requestFullscreen()):document.exitFullscreen().catch(e=>{console.log(e.message)})});const m=()=>{document.fullscreenElement?d.value=!0:d.value=!1};return T(()=>{document.addEventListener("fullscreenchange",m)}),j(()=>{document.removeEventListener("fullscreenchange",m)}),(e,a)=>{const l=Q,d=Z;return n(),s("div",me,[t(d,{class:"p-16px h-100%"},{default:i(()=>[_("div",{class:"h-100%",ref_key:"contentRef",ref:u},[t(l,{class:"flex-nowrap! h-100%"},{default:i(()=>[t(ce,{class:"flex-1 overflow-hidden"}),b(t(ie,null,null,512),[[C,o(r)]])]),_:1})],512)]),_:1})])}}}),[["__scopeId","data-v-57762b9d"]]);export{pe as default};
