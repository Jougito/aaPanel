System.register(["./index-legacy108.js?v=1760428868419","./page_layout-legacy.js?v=1760428868419","./ssl-legacy.js?v=1760428868419","./cert-legacy.js?v=1760428868419","./index-legacy85.js?v=1760428868419","./public-legacy.js?v=1760428868419","./index-legacy99.js?v=1760428868419","./ssl-lets-progress-legacy.js?v=1760428868419","./naive-legacy.js?v=1760428868419","./vue-legacy.js?v=1760428868419","./index-legacy133.js?v=1760428868419","./index-legacy.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1760428868419","./utils-legacy3.js?v=1760428868419","./index-legacy218.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1760428868419","./site-legacy.js?v=1760428868419","./common-legacy.js?v=1760428868419","./__commonjsHelpers__-legacy.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1760428868419","./site-legacy4.js?v=1760428868419","./index-legacy245.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1760428868419","./index-legacy98.js?v=1760428868419","./index-legacy100.js?v=1760428868419","./index-legacy101.js?v=1760428868419","./file-legacy.js?v=1760428868419","./theme-monokai-legacy.js?v=1760428868419","./index-legacy105.js?v=1760428868419","./soft-legacy.js?v=1760428868419","./useOperate-legacy.js?v=1760428868419","./useModal-legacy2.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1760428868419","./paypal-js-legacy.js?v=1760428868419"],function(e,t){"use strict";var a,n,l,s,i,d,o,u,r,c,_,p,S,m,y,h,v,f,x,g,w,b,C,L,k,$,j,P,B,E,R,D,N,U,O,A,z,I,M,T,F,J,H,q,G,V,W,X,K,Q,Y,Z,ee,te,ae,ne,le,se,ie,de,oe,ue,re,ce,_e,pe,Se,me,ye,he,ve,fe,xe,ge,we,be,Ce,Le,ke,$e,je,Pe,Be,Ee,Re,De,Ne,Ue,Oe,Ae,ze,Ie,Me,Te;return{setters:[e=>{a=e._},e=>{n=e.ds,l=e.ct,s=e.o,i=e.S,d=e.m,o=e.d,u=e.p,r=e._,c=e.u,_=e.a,p=e.aV,S=e.w},e=>{m=e.c,y=e.s,h=e.a,v=e.g,f=e.b},e=>{x=e.C},e=>{g=e.u},e=>{w=e._,b=e.a,C=e.ac,L=e.ad,k=e.ae,$=e.u,j=e.e,P=e.c,B=e.f,E=e.a0,R=e.a1,D=e.a2,N=e.h,U=e.n,O=e.d,A=e.af,z=e.ag,I=e.ah,M=e.ai,T=e.aj,F=e.j,J=e.q,H=e.a5},e=>{q=e._},e=>{G=e.a},e=>{V=e.dk,W=e.e2,X=e.dc,K=e.dj,Q=e.da,Y=e.aC,Z=e.dR,ee=e.dT,te=e.dU,ae=e._,ne=e.eg,le=e.G,se=e.d5},e=>{ie=e.k,de=e.P,oe=e.r,ue=e.c,re=e.y,ce=e.a2,_e=e.V,pe=e.a3,Se=e.an,me=e.W,ye=e.U,he=e.S,ve=e.a4,fe=e.j,xe=e.R,ge=e.ak,we=e.F,be=e.O,Ce=e.H,Le=e.a0,ke=e.e,$e=e._,je=e.am,Pe=e.w,Be=e.o,Ee=e.l,Re=e.v,De=e.m,Ne=e.x},e=>{Ue=e._},e=>{Oe=e._},e=>{Ae=e._},e=>{ze=e.u},e=>{Ie=e.A},e=>{Me=e._},e=>{Te=e.a3},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var Fe=document.createElement("style");Fe.textContent=".n-alert[data-v-d003ad66]{--n-font-size: 12px}.cert-info[data-v-d003ad66]{display:flex;align-items:center;height:24px}.cert-info .cert-label[data-v-d003ad66]{color:var(--site-config-ssl-label);font-weight:700}.cert-info .cert-value[data-v-d003ad66]{flex:1;width:0;margin-left:4px}.business-top-tips[data-v-da25cdef]{background:var(--site-config-business-tips)}.n-alert[data-v-bc2b39ec]{--n-font-size: 12px}.cert-info[data-v-bc2b39ec]{display:flex;align-items:center;height:24px}.cert-info .cert-label[data-v-bc2b39ec]{color:var(--site-config-ssl-label);font-weight:700}.cert-info .cert-value[data-v-bc2b39ec]{flex:1;width:0;margin-left:4px}\n/*$vite$:1*/",document.head.appendChild(Fe);const Je={class:"cert-info"},He={class:"cert-label"},qe={class:"cert-value"},Ge={class:"cert-info"},Ve={class:"cert-label"},We={class:"cert-value"},Xe={class:"cert-info"},Ke={class:"cert-label"},Qe={class:"cert-value"},Ye={class:"cert-info"},Ze={class:"cert-label"},et={class:"cert-value"},tt={key:0,class:"text-primary"},at={key:1,class:"text-error"},nt={class:"cert-info"},lt={class:"cert-label"},st={class:"cert-value"},it={class:"w-48%"},dt={class:"mb-8px"},ot={class:"w-48%"},ut={class:"mb-8px"},rt=ie({__name:"index",props:{info:{default:null},isRenew:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},emits:["refresh"],setup(e,{expose:t,emit:a}){const u=e,r=a,{t:c}=de(),{data:_}=g(),p=n(),S=oe(-1),v=oe(!1),f=oe(!1),j=oe(""),P=oe("");let B="";const E=oe("");let R="";const D=oe({issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),N=ue(()=>S.value===x.LetsEncryptDeploy?c("Site.Cert.index_65"):S.value===x.BusinessDeploy?c("Site.Cert.index_64"):S.value===x.TestDeploy?c("Site.Cert.index_38"):c("Site.Cert.index_37")),U=ue(()=>!!E.value),O=ue(()=>u.isRenew||S.value===x.LetsEncryptDeploy),A=ue(()=>!1),z=ue(()=>v.value),I=async e=>{e?(await y({siteName:_.name}),r("refresh")):b({title:c("Site.Cert.index_12"),content:c("Site.Cert.index_13"),onConfirm:async()=>{await m({siteName:_.name}),r("refresh")},onPublicClose:()=>{f.value=!0}})},M=()=>{""!==P.value.trim()&&""!==E.value.trim()?P.value!==B&&B||E.value!==R&&R?b({title:c("Site.Cert.index_10"),content:c("Site.Cert.index_11"),onConfirm:async()=>{await T()}}):T():d.error(c("Site.Cert.index_9"))},T=async()=>{const{message:e}=await C({key:P.value,cert:E.value});o(e)&&e.hash&&(await L({hash:e.hash,domains:JSON.stringify([_.name]),append:1}),d.success(c("SSL.index_32"))),H()},F=async()=>{const{message:e}=await k({hash:u.info?.hash||""});o(e)&&$({hideClose:!0,data:{isJump:!1,task_id:e.task_id,onFinish:()=>{r("refresh")}},component:G})},J=async()=>{await h({updateOf:1,siteName:_.name}),H()},H=()=>{r("refresh"),p.setRefresh(!0)};return re(()=>{const{info:e}=u;e&&(S.value=e.type,v.value=e.status,f.value=e.httpTohttps,P.value=e.key||"",B=e.key||"",E.value=e.csr||"",R=e.csr||"",D.value=e.cert_data,j.value=e.index)}),t({init:r("refresh")}),(e,t)=>{const a=s,n=W,d=X,o=K,u=l,r=V,c=q,_=Q,p=Y,S=w,m=i;return _e(),ce(m,{show:e.loading},{default:pe(()=>[ye(U)?(_e(),ce(r,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:pe(()=>[me(u,{"x-gap":12,cols:"15"},{default:pe(()=>[me(n,{span:"8"},{default:pe(()=>[he("div",Je,[he("div",He,ve(e.$t("Site.Cert.index_44"))+ve(e.$t("Public.Punctuation.Colon")),1),he("div",qe,[me(a,null,{default:pe(()=>[fe(ve(ye(N)),1)]),_:1})])])]),_:1}),me(n,{span:"7"},{default:pe(()=>[he("div",Ge,[he("div",Ve,ve(e.$t("Site.Cert.index_45"))+ve(e.$t("Public.Punctuation.Colon")),1),he("div",We,[me(d,null,{default:pe(()=>[fe(ve(ye(D).issuer||"other"),1)]),_:1})])])]),_:1}),me(n,{span:"8"},{default:pe(()=>[he("div",Xe,[he("div",Ke,ve(e.$t("Site.Cert.index_46"))+ve(e.$t("Public.Punctuation.Colon")),1),he("div",Qe,[me(d,null,{default:pe(()=>[fe(ve(ye(D).dns.join(e.$t("Public.Punctuation.Comma"))),1)]),_:1})])])]),_:1}),me(n,{span:"7"},{default:pe(()=>[he("div",Ye,[he("div",Ze,ve(e.$t("Site.Cert.index_47"))+ve(e.$t("Public.Punctuation.Colon")),1),he("div",et,[ye(D).endtime>0?(_e(),xe("span",tt,ve(e.$t("Site.Cert.index_48",{date:ye(D).notAfter,days:ye(D).endtime})),1)):(_e(),xe("span",at,ve(e.$t("Site.Cert.index_47")),1))])])]),_:1}),me(n,{span:"8"},{default:pe(()=>[he("div",nt,[he("div",lt,ve(e.$t("Site.Cert.index_49"))+ve(e.$t("Public.Punctuation.Colon")),1),he("div",st,[me(o,{value:ye(f),"onUpdate:value":[t[0]||(t[0]=e=>ge(f)?f.value=e:null),I],size:"small"},null,8,["value"])])])]),_:1})]),_:1})]),_:1})):Se("",!0),me(_,{class:"mb-16px",size:10,justify:"space-between"},{default:pe(()=>[he("div",it,[he("div",dt,ve(e.$t("Site.Cert.index_50")),1),me(c,{value:ye(P),"onUpdate:value":t[1]||(t[1]=e=>ge(P)?P.value=e:null),rows:10},null,8,["value"])]),he("div",ot,[he("div",ut,ve(e.$t("Site.Cert.index_51")),1),me(c,{value:ye(E),"onUpdate:value":t[2]||(t[2]=e=>ge(E)?E.value=e:null),rows:10},null,8,["value"])])]),_:1}),me(_,{class:"mb-12px"},{default:pe(()=>[me(p,{type:"primary",onClick:M},{default:pe(()=>[fe(ve(ye(v)?e.$t("Public.Btn.Save"):e.$t("Site.Cert.index_52")),1)]),_:1}),ye(O)?(_e(),ce(p,{key:0,type:"primary",onClick:F},{default:pe(()=>[fe(ve(e.$t("Site.Cert.index_53")),1)]),_:1})):Se("",!0),ye(A)?(_e(),ce(p,{key:1},{default:pe(()=>[fe(ve(e.$t("Site.Cert.index_54")),1)]),_:1})):Se("",!0),ye(z)?(_e(),ce(p,{key:2,onClick:J},{default:pe(()=>[fe(ve(e.$t("Site.Cert.index_55")),1)]),_:1})):Se("",!0)]),_:1}),me(S,null,{default:pe(()=>[he("li",null,ve(e.$t("Site.Cert.index_33")),1),he("li",null,ve(e.$t("Site.Cert.index_34")),1),he("li",null,ve(e.$t("Site.Cert.index_35")),1),he("li",null,ve(e.$t("Site.Cert.index_36")),1)]),_:1})]),_:1},8,["show"])}}}),ct=u(rt,[["__scopeId","data-v-d003ad66"]]),_t={class:"business-top-tips flex flex-wrap border-#d6e9c6 border-1px rounded-5px p-12px"},pt={class:"text-#3c763d w-100%"},St=u(ie({__name:"top-tips",setup(e){const{t:t}=de(),a=[t("SSL.SiteSSL.index_5"),t("SSL.SiteSSL.index_6"),t("SSL.SiteSSL.index_7"),t("SSL.SiteSSL.index_8"),t("SSL.SiteSSL.index_9"),t("SSL.SiteSSL.index_10"),t("SSL.SiteSSL.index_11")];return(e,t)=>{const n=r,l=Q;return _e(),xe("div",_t,[(_e(),xe(we,null,be(a,(e,t)=>me(l,{size:5,key:e,class:Ce(["flex-nowrap! leading-20px",{"w-33%":t!==a.length-1}])},{default:pe(()=>[me(n,{name:"base-tick",size:16,color:"#ff8d00"}),he("span",pt,ve(e),1)]),_:2},1032,["class"])),64))])}}}),[["__scopeId","data-v-da25cdef"]]),mt={class:"my-10px"},yt=ie({__name:"table",setup(e){const a=$e(()=>_(()=>t.import("./index-legacy213.js?v=1760428868419"),void 0)),l=$e(()=>_(()=>t.import("./index-legacy214.js?v=1760428868419"),void 0)),s=$e(()=>_(()=>t.import("./domain-verification-legacy.js?v=1760428868419"),void 0)),i=c(),{userInfo:d}=Le(i),u=n(),{t:r}=de(),p=ke({p:1,limit:9999}),S=j(r("SSL.Business.index_41"),{onRefresh:(e,t)=>{h.data.request=!0,h.data.uc_id=t,h.data.verify=e,h.show=!0,g()}}),m=j(r("SSL.index_44")),y=j(r("SSL.index_49"),{onRefresh:()=>{g(),u.setRefresh(!0)}}),h=j(r("SSL.Business.index_42"),{onRefresh:()=>{g()}}),{table:v,columns:f}=P([{key:"verify_domains",title:r("Layout.Sider.mail_3"),render:e=>me("span",{innerHTML:e.verify_domains&&e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},{key:"title",title:r("Site.Cert.index_44"),render:e=>e.order_info.title,ellipsis:{tooltip:!0}},ze({title:r("SSL.index_54")}),{key:"order_status",title:r("SSL.Business.index_43"),render:e=>{const t=e.order_info;return t.certId||t.domains.length?!t.certId&&t.domains.length?me("span",{class:"color-warning"},[fe(" "),r("SSL.Business.index_45"),fe(" ")]):"PENDING"===t.order_status&&1===t.status?me("span",{class:"color-warning"},[fe(" "),r("SSL.Business.index_46"),fe(" ")]):"COMPLETE"===t.order_status&&1===t.status?me("span",{class:"color-#20a53a"},[fe(" "),r("SSL.Business.index_47"),fe(" ")]):"CANCELLED"===t.order_status&&1===t.status||-1===t.status?me("span",{class:"color-warning"},[fe(" "),r("SSL.Business.index_48"),fe(" ")]):"FAILED"===t.order_status&&1===t.status?me("span",{class:"color-error"},[fe(" "),r("SSL.Business.index_49"),fe(" ")]):"EXPIRED"===t.order_status&&1===t.status?me("span",{class:"color-warning"},[fe(" "),r("SSL.Business.index_50"),fe(" ")]):1!==t.status||["PENDING","COMPLETE","CANCELLED","FAILED","EXPIRED"].includes(t.order_status)?0===t.status?me("span",{class:"color-warning"},[fe(" "),r("SSL.Business.index_52"),fe(" ")]):void 0:me("span",{class:"color-warning"},[fe(" "),r("SSL.Business.index_51"),fe(" ")]):me("span",{class:"color-warning cursor-pointer",onClick:()=>x(e)},[" ",r("SSL.Business.index_44")," "])}},B({width:140,options:e=>[{show:!e.order_info.certId&&!e.order_info.domains.length,label:r("SSL.Business.index_53"),onClick:()=>{x(e)}},{show:"PENDING"===e.order_info.order_status&&1===e.order_info.status,label:r("SSL.Business.index_54"),onClick:async()=>{const{message:t}=await E({uc_id:e.order_info.uc_id});o(t)&&(h.data.uc_id=e.order_info.uc_id,h.data.verify=t.data,h.data.paths=t.paths,h.show=!0)}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:r("SSL.index_58"),onClick:async()=>{y.data.row=e,y.show=!0}},{show:"COMPLETE"===e.order_info.order_status&&1===e.order_info.status,label:r("Ftp.Label.index_11"),onClick:async()=>{const t=window.location.origin+"/v2/business_ssl?action=download_cert&uc_id="+e.order_info.uc_id;window.open(t)}},{show:!1,label:r("Public.Btn.Del"),onClick:()=>{b({title:r("SSL.index_59"),content:r("SSL.index_60"),onConfirm:async()=>{await R({hash:e.hash}),g()}})}}]})]),x=e=>{S.data.row=e,S.show=!0},g=async()=>{try{v.loading=!0;const{message:e}=await D(p);o(e)&&(v.data=e.data,v.total=e.total)}finally{v.loading=!1}};return d.value.status&&g(),(e,t)=>{const n=Y,i=N,o=Ae,u=Oe,c=Ue;return _e(),xe("div",mt,[me(c,{install:ye(d).status},{desc:pe(()=>[t[5]||(t[5]=he("span",{class:"mr-10px"},"Business certificates require login panel to start using them",-1)),me(n,{type:"primary",onClick:ye(U)},{default:pe(()=>[fe(ve(e.$t("Login.index_3")),1)]),_:1},8,["onClick"])]),default:pe(()=>[me(o,null,{toolsLeft:pe(()=>[me(n,{type:"primary",onClick:t[0]||(t[0]=e=>ye(m).show=!0)},{default:pe(()=>[fe(ve(ye(r)("SSL.index_44")),1)]),_:1})]),table:pe(()=>[me(i,{loading:ye(v).loading,data:ye(v).data,columns:ye(f),"max-height":220},null,8,["loading","data","columns"])]),_:1}),me(u,{show:ye(m).show,"onUpdate:show":t[1]||(t[1]=e=>ye(m).show=e),title:ye(m).title,data:ye(m).data,"min-height":250,component:Ie},null,8,["show","title","data"]),me(u,{show:ye(S).show,"onUpdate:show":t[2]||(t[2]=e=>ye(S).show=e),title:ye(S).title,data:ye(S).data,width:650,"min-height":450,component:ye(a)},null,8,["show","title","data","component"]),me(u,{show:ye(y).show,"onUpdate:show":t[3]||(t[3]=e=>ye(y).show=e),title:ye(y).title,data:ye(y).data,width:720,height:530,component:ye(l)},null,8,["show","title","data","component"]),me(u,{show:ye(h).show,"onUpdate:show":t[4]||(t[4]=e=>ye(h).show=e),title:ye(h).title,data:ye(h).data,width:650,"min-height":450,component:ye(s)},null,8,["show","title","data","component"])]),_:1},8,["install"])])}}}),ht={class:"text-error"},vt=u({},[["render",function(e,t){const a=s,n=w;return _e(),ce(n,null,{default:pe(()=>[he("li",ht,ve(e.$t("SSL.SiteSSL.index_1")),1),he("li",null,ve(e.$t("SSL.SiteSSL.index_2")),1),he("li",null,ve(e.$t("SSL.SiteSSL.index_3")),1),he("li",null,[fe(ve(e.$t("SSL.SiteSSL.index_4"))+" ",1),me(a,{href:"https://www.aapanel.com/docs/Function/BusinessCertificate.html",target:"_blank"},{default:pe(()=>[fe(ve(e.$t("SSL.Business.index_20")),1)]),_:1})])]),_:1})}]]),ft=ie({__name:"index",setup:e=>(e,t)=>(_e(),xe("div",null,[me(St),me(yt),me(vt)]))}),xt={class:"cert-info"},gt={class:"cert-label"},wt={class:"cert-value"},bt={class:"cert-info"},Ct={class:"cert-label"},Lt={class:"cert-value"},kt={class:"cert-info"},$t={class:"cert-label"},jt={class:"cert-value"},Pt={class:"cert-info"},Bt={class:"cert-label"},Et={class:"cert-value"},Rt={key:0,class:"text-primary"},Dt={key:1,class:"text-error"},Nt={class:"w-48%"},Ut={class:"mb-8px"},Ot={class:"w-48%"},At={class:"mb-8px"},zt=ie({__name:"cert",emits:["update"],setup(e,{emit:t}){const a=t,{t:s}=de(),{data:d}=g(),u=n(),r=oe(!1),c=oe(1),_=oe(""),p=oe(""),S=ke({hash:"",issuer:"",notAfter:"",notBefore:"",dns:[],subject:"",endtime:0}),m=async()=>{const{message:e}=await k({hash:S.hash});o(e)&&$({hideClose:!0,data:{isJump:!1,task_id:e.task_id,onFinish:()=>{b()}},component:G})},y=async()=>{await h({updateOf:1,siteName:d.name}),a("update"),u.setRefresh(!0)},{loading:f,setLoading:x}=O(),b=async()=>{try{x(!0);const{message:e}=await v({siteName:d.name});o(e)&&(r.value=e.status,S.hash=e.hash,S.issuer=e.cert_data.issuer,S.notAfter=e.cert_data.notAfter,S.notBefore=e.cert_data.notBefore,S.dns=e.cert_data.dns,S.subject=e.cert_data.subject,S.endtime=e.cert_data.endtime,_.value=e.key,p.value=e.csr,c.value=e.auto_renew)}finally{x(!1)}};return b(),(e,t)=>{const a=W,n=X,s=l,d=V,o=q,u=Q,r=Y,h=w,v=i;return _e(),ce(v,{show:ye(f)},{default:pe(()=>[me(d,{class:"mb-16px",type:"success","show-icon":!1},{default:pe(()=>[me(s,{"x-gap":12,cols:"15"},{default:pe(()=>[ye(c)?(_e(),ce(a,{key:0,span:"16"},{default:pe(()=>[he("div",xt,[he("div",gt,ve(e.$t("SSL.SiteSSL.index_22"))+"：",1),he("div",wt,ve(e.$t("SSL.SiteSSL.index_23")),1)])]),_:1})):Se("",!0),me(a,{span:"7"},{default:pe(()=>[he("div",bt,[he("div",Ct,ve(e.$t("Site.Cert.index_45"))+"：",1),he("div",Lt,[me(n,null,{default:pe(()=>[fe(ve(ye(S).issuer),1)]),_:1})])])]),_:1}),me(a,{span:"8"},{default:pe(()=>[he("div",kt,[he("div",$t,ve(e.$t("Site.Cert.index_46"))+"：",1),he("div",jt,[me(n,null,{default:pe(()=>[fe(ve(ye(S).dns.join(e.$t("Public.Punctuation.Comma"))),1)]),_:1})])])]),_:1}),me(a,{span:"7"},{default:pe(()=>[he("div",Pt,[he("div",Bt,ve(e.$t("Site.Cert.index_47"))+ve(e.$t("Public.Punctuation.Colon")),1),he("div",Et,[ye(S).endtime>0?(_e(),xe("span",Rt,ve(e.$t("Site.Cert.index_48",{date:ye(S).notAfter,days:ye(S).endtime})),1)):(_e(),xe("span",Dt,ve(e.$t("Site.Cert.index_47")),1))])])]),_:1})]),_:1})]),_:1}),me(u,{class:"mb-16px",size:10,justify:"space-between"},{default:pe(()=>[he("div",Nt,[he("div",Ut,ve(e.$t("Site.Cert.index_50")),1),me(o,{readonly:"",value:ye(_),"onUpdate:value":t[0]||(t[0]=e=>ge(_)?_.value=e:null),rows:14},null,8,["value"])]),he("div",Ot,[he("div",At,ve(e.$t("Site.Cert.index_51")),1),me(o,{readonly:"",value:ye(p),"onUpdate:value":t[1]||(t[1]=e=>ge(p)?p.value=e:null),rows:14},null,8,["value"])])]),_:1}),me(u,{class:"mb-12px"},{default:pe(()=>[me(r,{type:"primary",onClick:m},{default:pe(()=>[fe(ve(e.$t("Site.Cert.index_53")),1)]),_:1}),me(r,{onClick:y},{default:pe(()=>[fe(ve(e.$t("Site.Cert.index_55")),1)]),_:1})]),_:1}),me(h,null,{default:pe(()=>[he("li",null,ve(e.$t("SSL.SiteSSL.index_24")),1),he("li",null,ve(e.$t("SSL.SiteSSL.index_25")),1)]),_:1})]),_:1},8,["show"])}}}),It=u(zt,[["__scopeId","data-v-bc2b39ec"]]),Mt={class:"flex items-center"},Tt={class:"leading-17px"},Ft={class:"w-full"},Jt={class:"w-full"},Ht={class:"text-error"},qt=ie({__name:"apply",emits:["update"],setup(e,{emit:t}){const a=je(),{t:l}=de(),{data:s}=g(),u=n(),c=t,_=ke({auth_type:"http",dns_manual:0,auto_wildcard:0,domains:[],all:!1}),m={domains:{required:!0,trigger:"change",type:"array",message:l("SSL.SiteSSL.index_16")}},y=oe(null),h=oe([]),v=e=>h.value.find(t=>t.name===e)?.auto,f=()=>{a.push("/ssl_domain/domain")},x=ue(()=>_.domains.length>0&&_.domains.length<h.value.length);Pe(()=>_.domains,e=>{e.length===h.value.length?_.all=!0:e.length||(_.all=!1)}),Pe(()=>_.all,e=>{e?(_.domains=h.value.map(e=>e.name),y.value?.validate()):_.domains=[]}),Pe(()=>_.auth_type,e=>{"dns"===e?(_.domains=h.value.filter(e=>e.auto).map(e=>e.name),y.value?.validate()):_.domains=[]});const b=ue(()=>_.domains.filter(e=>!v(e))),C=async()=>{if(await(y.value?.validate()),"dns"===_.auth_type&&b.value.length&&!_.dns_manual)return void d.error({content:()=>De("span",{innerHTML:`${b.value.join("<br/>")}${l("SSL.SiteSSL.index_14")}`})});let e={auth_type:_.dns_manual?"dns_manual":_.auth_type,auto_wildcard:_.auto_wildcard,domains:JSON.stringify(_.domains),site_id:_.dns_manual?s.id:void 0,deploy:_.dns_manual?0:1};if(_.dns_manual&&"dns"===_.auth_type){const{message:t}=await A({site_id:s.id,domains:JSON.stringify(_.domains)});if(o(t)&&Object.keys(t).length)return void z(t.auths,s.id,_.domains,()=>{c("update"),u.setRefresh(!0)},!0);const n=$({width:500,height:300,hideClose:!0,component:I});try{const{message:t}=await M(e,!1);o(t)&&(t.deploy?(d.success(t.result||l("SSL.index_32")),c("update"),u.setRefresh(!0)):Array.isArray(t.auths)&&t.auths.length&&z(t.auths,s.id,_.domains,()=>{c("update"),u.setRefresh(!0)}))}catch(a){T(se(a,"message",""))}finally{n.hide()}return}const{message:t}=await M(e);o(t)&&$({hideClose:!0,data:{isJump:!1,task_id:t.task_id,onFinish:()=>{c("update"),u.setRefresh(!0)}},component:G})},{loading:L,setLoading:k}=O();return Be(()=>{(async()=>{try{k(!0);const{message:e}=await Te({id:s.id});if(S(e)){const t=e.map(async e=>{const{message:t}=await F({domain:e.name});o(t)&&h.value.push({name:e.name,auto:!!t.hash})});await Promise.all(t)}}finally{k(!1)}})()}),(e,t)=>{const a=r,n=V,l=te,s=p,d=ee,o=Z,u=ae,c=Q,S=ne,g=le,k=i,$=Y,j=Me,P=w;return _e(),xe("div",null,[Ee(me(n,{"show-icon":!1,class:"mb-10px"},{default:pe(()=>[he("div",Mt,[me(a,{name:"base-info",size:"17",class:"mr-8px"}),he("span",Tt,ve(e.$t("SSL.SiteSSL.index_12")),1)])]),_:1},512),[[Re,"dns"===ye(_).auth_type]]),me(j,{ref_key:"formRef",ref:y,model:ye(_),rules:m,"label-width":"140"},{default:pe(()=>[me(o,{label:e.$t("Config.Safe.Ssl.index_2")},{default:pe(()=>[me(d,{value:ye(_).auth_type,"onUpdate:value":t[0]||(t[0]=e=>ye(_).auth_type=e)},{default:pe(()=>[me(s,null,{default:pe(()=>[me(l,{value:"http"},{default:pe(()=>[fe(ve(e.$t("SSL.SiteSSL.index_17")),1)]),_:1}),me(l,{value:"dns"},{default:pe(()=>[fe(ve(e.$t("SSL.index_12"))+" (Wildcard support) ",1)]),_:1})]),_:1})]),_:1},8,["value"])]),_:1},8,["label"]),Ee(me(o,{label:" ","show-feedback":!1},{default:pe(()=>[me(u,{checked:ye(_).dns_manual,"onUpdate:checked":t[1]||(t[1]=e=>ye(_).dns_manual=e),"checked-value":1,"unchecked-value":0},{default:pe(()=>[fe(ve(e.$t("SSL.index_2")),1)]),_:1},8,["checked"])]),_:1},512),[[Re,"dns"===ye(_).auth_type]]),Ee(me(o,{label:" "},{default:pe(()=>[me(u,{checked:ye(_).auto_wildcard,"onUpdate:checked":t[2]||(t[2]=e=>ye(_).auto_wildcard=e),"checked-value":1,"unchecked-value":0},{default:pe(()=>[fe(ve(e.$t("SSL.SiteSSL.index_20")),1)]),_:1},8,["checked"])]),_:1},512),[[Re,"dns"===ye(_).auth_type]]),me(o,{label:e.$t("Mail.Domain.index_3"),path:"domains"},{default:pe(()=>[me(k,{show:ye(L),class:"p-12px w-300px max-h-300px min-h-100px overflow-auto border border-solid border-#ccc"},{default:pe(()=>[me(u,{class:"mb-12px",checked:ye(_).all,"onUpdate:checked":t[3]||(t[3]=e=>ye(_).all=e),label:e.$t("Public.SelectAll"),indeterminate:ye(x)},null,8,["checked","label","indeterminate"]),ye(h).length?(_e(),ce(S,{key:0,value:ye(_).domains,"onUpdate:value":t[4]||(t[4]=e=>ye(_).domains=e)},{default:pe(()=>[me(c,{class:"flex-col!",size:12},{default:pe(()=>[(_e(!0),xe(we,null,be(ye(h),e=>(_e(),ce(u,{key:e.name,value:e.name,label:e.name},null,8,["value","label"]))),128))]),_:1})]),_:1},8,["value"])):(_e(),ce(g,{key:1,description:"No domain name"}))]),_:1},8,["show"])]),_:1},8,["label"]),Ee(me(o,{label:" "},{default:pe(()=>[me(n,{"show-icon":!1,type:ye(b).length?"warning":"success"},{default:pe(()=>[(_e(!0),xe(we,null,be(ye(_).domains,t=>(_e(),ce(c,{key:t},{default:pe(()=>[v(t)?(_e(),ce(c,{key:0,class:"flex-nowrap! py-3px"},{default:pe(()=>[me(a,{name:"base-success",size:"17",color:"#20a53a"}),he("span",Ft,"["+ve(t)+"] "+ve(e.$t("SSL.SiteSSL.index_13")),1)]),_:2},1024)):(_e(),ce(c,{key:1,class:"flex-nowrap! py-3px items-center!"},{default:pe(()=>[me(a,{name:"base-error",size:"17",color:"#E85445"}),he("span",Jt,"["+ve(t)+"] "+ve(e.$t("SSL.SiteSSL.index_14")),1),me($,{type:"primary",size:"tiny",onClick:f},{default:pe(()=>[fe(ve(e.$t("SSL.SiteSSL.index_21")),1)]),_:1})]),_:2},1024))]),_:2},1024))),128))]),_:1},8,["type"])]),_:1},512),[[Re,"dns"===ye(_).auth_type&&ye(_).domains.length&&!ye(_).dns_manual]]),me(o,{label:" "},{default:pe(()=>[me($,{type:"primary",onClick:C},{default:pe(()=>[fe(ve(e.$t("Public.Btn.Apply")),1)]),_:1})]),_:1})]),_:1},8,["model"]),Ee(me(P,{class:"mt-16px"},{default:pe(()=>[he("li",Ht,ve(e.$t("SSL.SiteSSL.index_15")),1),he("li",null,ve(e.$t("Site.Cert.index_21")),1),he("li",null,ve(e.$t("Site.Cert.index_23")),1),he("li",null,ve(e.$t("Site.Cert.index_24")),1)]),_:1},512),[[Re,"http"===ye(_).auth_type]]),Ee(me(P,{class:"mt-24px"},{default:pe(()=>[t[5]||(t[5]=he("li",null,"Manually resolved certificates do not support auto-renewal",-1)),he("li",null,ve(e.$t("Site.Cert.index_25")),1),he("li",null,ve(e.$t("Site.Cert.index_26")),1),he("li",null,ve(e.$t("Site.Cert.index_27")),1),he("li",null,ve(e.$t("Site.Cert.index_28")),1)]),_:1,__:[5]},512),[[Re,"dns"===ye(_).auth_type]])])}}}),Gt=ie({__name:"index",props:{isOpen:{type:Boolean},type:{},onRefresh:{type:Function}},setup(e){const t=e,a=()=>{t.onRefresh()};return(e,n)=>(_e(),xe("div",null,[t.isOpen&&"Let's Encrypt"===t.type?(_e(),ce(It,{key:0,onUpdate:a})):(_e(),ce(qt,{key:1,onUpdate:a}))]))}}),Vt=ie({__name:"index",props:{onMenuChange:{type:Function}},setup(e,{expose:t}){const{data:a}=g(),{t:n}=de(),l=ke({p:1,limit:99999}),{columns:s,table:i}=P([{key:"domain",title:n("Site.Cert.index_29"),render:e=>me("span",{innerHTML:e.verify_domains.length>0?e.verify_domains.join("<br/>"):"--"},null)},ze({title:n("SSL.index_54"),width:140}),{key:"issuer",title:n("Site.Cert.index_30"),ellipsis:{tooltip:!0}},B({width:150,options:t=>[{label:n("Public.Btn.Deploy"),onClick:async()=>{try{await L({hash:t.hash,domains:JSON.stringify([a.name]),append:1}),d.success(n("SSL.index_32")),setTimeout(()=>{e.onMenuChange()},500)}catch(l){console.log(l)}}},{show:"Let's Encrypt"===t.provider,label:n("Public.Btn.Del"),onClick:()=>{(e=>{J({title:n("Site.Cert.index_31"),content:n("Site.Cert.index_32"),onConfirm:async()=>{await R({hash:e.hash}),c()}})})(t)}}]})]),{loading:u,setLoading:r}=O(!0),c=async()=>{try{r(!0);const{message:e}=await H(l);o(e)&&(i.data=e.data)}finally{r(!1)}};return c(),t({init:c}),(e,t)=>{const a=N;return _e(),xe("div",null,[me(a,{loading:ye(u),columns:ye(s),data:ye(i).data,"max-height":510},null,8,["loading","columns","data"])])}}}),Wt={class:"mr-12px"},Xt={key:0,class:"mr-12px"},Kt={key:1,class:"mr-12px"};e("default",ie({__name:"index",setup(e,{expose:t}){const l=n(),{data:s}=g(),{t:i}=de(),d=oe("current"),u=oe(""),r=oe(x.NotDeploy),c=oe(""),_=oe(!1),p=oe(0),S=oe(!1),m=oe(""),y=async()=>{const{message:e}=await k({hash:u.value});o(e)&&$({hideClose:!0,data:{isJump:!1,task_id:e.task_id,onFinish:()=>{v()}},component:G})},h=e=>{w.value[0].data&&(w.value[0].data.loading=e)},v=async()=>{try{h(!0);const{message:a}=await f({siteName:s.name});o(a)&&(r.value=a.type,_.value=a.status,p.value=se(a,"cert_data.endtime",0),m.value=a.cert_data.issuer_O||"",S.value=(()=>{let e=!1;return p.value<=30&&(e=!0),r.value===x.TestDeploy&&p.value<0&&(e=!0),r.value!==x.SaveOrHolderDeploy&&r.value!==x.NotDeploy||(e=!1),e})(),c.value=a.cert_data.dns.join(","),u.value=a.hash,t=a,w.value[0].data&&(w.value[0].data.info=t),e=S.value,w.value[0].data&&(w.value[0].data.isRenew=e))}catch{_.value=!1,S.value=!1}finally{h(!1)}var e,t},w=oe([{key:"current",label:()=>me("div",null,[me("span",null,[fe("Current Certs - ")]),me("span",{class:_.value?"text-#1d9534":"text-red-500"},[fe("["),_.value?"Deployed":"Not Deployed",fe("]")])]),data:{info:null,isRenew:!1,loading:!0,onRefresh:v},component:Ne(ct)},{key:"business",label:i("Site.Cert.index_64"),component:Ne(ft)},{key:"let",label:i("Site.Cert.index_65"),data:{isOpen:ue(()=>_.value),type:ue(()=>m.value),onRefresh:v},component:Ne(Gt)},{key:"holder",label:i("Site.Cert.index_66"),component:Ne(Vt),data:{onMenuChange:()=>{d.value="current",v(),l.setRefresh(!0)}}}]);return t({init:()=>{v()}}),(e,t)=>{const n=Y,l=V,s=a;return _e(),xe("div",null,[ye(_)?Se("",!0):(_e(),ce(l,{key:0,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:pe(()=>[he("span",Wt,ve(e.$t("Site.Cert.index_41")),1),me(n,{size:"tiny",type:"primary",onClick:t[0]||(t[0]=e=>d.value="business")},{default:pe(()=>[fe(ve(e.$t("Site.Cert.index_43")),1)]),_:1})]),_:1})),ye(_)&&ye(S)?(_e(),ce(l,{key:1,class:"mb-12px",type:"error","show-icon":!1,style:{"--n-padding":"9px 16px"}},{default:pe(()=>[ye(p)>0?(_e(),xe("span",Xt,ve(e.$t("SSL.SiteSSL.index_26",[ye(c),ye(p)])),1)):(_e(),xe("span",Kt,ve(e.$t("SSL.SiteSSL.index_19",[ye(c)])),1)),me(n,{size:"tiny",type:"primary",onClick:y},{default:pe(()=>[fe(ve(e.$t("Site.Cert.index_53")),1)]),_:1})]),_:1})):Se("",!0),me(s,{value:ye(d),"onUpdate:value":t[1]||(t[1]=e=>ge(d)?d.value=e:null),options:ye(w)},null,8,["value","options"])])}}}))}}});
