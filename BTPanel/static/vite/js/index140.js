import{_ as e}from"./index245.js?v=1760428868419";import{_ as a,a as n}from"./index.vue_vue_type_script_setup_true_lang18.js?v=1760428868419";import{_ as t}from"./index.vue_vue_type_script_setup_true_lang19.js?v=1760428868419";import{_ as s}from"./index133.js?v=1760428868419";import{_ as l}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1760428868419";import{c as o,f as i,q as u,d as r,h as d,_ as p}from"./public.js?v=1760428868419";import{k as _,P as m,r as c,a2 as v,V as x,a3 as g,W as f,U as y,aj as b,ak as j,j as h,a4 as k,c as w,R as P,S as D,F as B,O as U,an as C}from"./vue.js?v=1760428868419";import{p as M}from"./soft.js?v=1760428868419";import{n as S,eh as $,ei as z,d as F,m as L,ej as O,bu as H,S as I,ek as N,el as q,p as K,em as R}from"./page_layout.js?v=1760428868419";import{da as T,au as V,aC as W,dj as A}from"./naive.js?v=1760428868419";import{_ as E}from"./index98.js?v=1760428868419";import{_ as G}from"./index105.js?v=1760428868419";import"./php.js?v=1760428868419";import"./alarm.js?v=1760428868419";import"./index.vue_vue_type_script_setup_true_lang.js?v=1760428868419";import"./index.vue_vue_type_script_setup_true_lang11.js?v=1760428868419";import"./index100.js?v=1760428868419";import"./index101.js?v=1760428868419";import"./__commonjsHelpers__.js?v=1760428868419";import"./file.js?v=1760428868419";import"./theme-monokai.js?v=1760428868419";import"./common.js?v=1760428868419";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1760428868419";import"./site.js?v=1760428868419";const J=_({__name:"index",setup(e,{expose:a}){const{t:n}=m(),t=c(""),{table:p,columns:_}=o([{key:"name",title:n("Database.index_12")},{key:"sizeOnDisk",title:n("Site.DelSite.index_8"),render:e=>S(e.sizeOnDisk)},i({options:e=>[{label:n("Public.Btn.Del"),onClick:()=>{u({title:n("Database.index_30"),content:n("Plugin.MongoDB.index_8",[e.name]),onConfirm:async()=>{await $("mongodb",{name:e.name,id:e.id}),B()}})}}]})]),w=async()=>{t.value?(await O("mongodb",{sid:0,name:t.value,db_user:t.value,password:H(16),active:!1,ssl:"",ps:t.value}),B()):L.error(n("Database.form.index_15"))},{loading:P,setLoading:D}=r(),B=async()=>{if(M.s_status)try{D(!0);const{message:e}=await z();F(e)&&(p.data=e.databases)}finally{D(!1)}};return B(),a({init:B}),(e,a)=>{const n=V,o=W,i=T,u=d,r=l,m=s;return x(),v(m,{install:y(M).s_status},{desc:g(()=>[h(k(e.$t("Plugin.MongoDB.index_7")),1)]),default:g(()=>[f(r,null,{toolsLeft:g(()=>[f(i,{class:"flex-nowrap!"},{default:g(()=>[f(n,{value:y(t),"onUpdate:value":a[0]||(a[0]=e=>j(t)?t.value=e:null),placeholder:e.$t("Database.index_12"),onKeyup:b(w,["enter"])},null,8,["value","placeholder"]),f(o,{type:"primary",onClick:w},{default:g(()=>[h(k(e.$t("Database.mongo.index_4")),1)]),_:1})]),_:1})]),table:g(()=>[f(u,{data:y(p).data,columns:y(_),loading:y(P),"max-height":400},null,8,["data","columns","loading"])]),_:1})]),_:1},8,["install"])}}}),Q={class:"w-100px! text-right"},X={class:"w-150px! color-#666"},Y={class:"w-100px! text-right"},Z={class:"text-center my-10px"},ee=K(_({__name:"index",setup(e,{expose:a}){const{t:n}=m(),t={bindIp:n("Plugin.MongoDB.index_2"),dbPath:n("Plugin.MongoDB.index_3"),path:n("Plugin.MongoDB.index_4"),pidFilePath:n("Plugin.MongoDB.index_5"),port:n("Plugin.MongoDB.index_6")},s=c(),l=async()=>{const e=s.value.reduce((e,a)=>(e[a.name]=a.value,e),{});await N(e)},o=w(()=>{const e=s.value.find(e=>"authorization"===e.name);return!!e&&"enabled"===e.value}),i=()=>{const e=s.value.find(e=>"pwd"===e.name);e&&(e.value=H(16))},{loading:u,setLoading:d}=r(),_=async()=>{try{d(!0);const{message:e}=await q();F(e)&&(s.value=Object.entries(e).map(([e,a])=>({name:e,value:a,ps:t[e]})))}finally{d(!1)}};return _(),a({init:_}),(e,a)=>{const n=V,t=A,r=T,d=E,_=W,m=p,c=I;return x(),v(c,{show:y(u)},{default:g(()=>[(x(!0),P(B,null,U(y(s),(e,a)=>(x(),P("div",{key:a},["pwd"!==e.name?(x(),v(r,{key:0,class:"list_box"},{default:g(()=>[D("div",Q,k(e.name),1),"authorization"!==e.name?(x(),v(n,{key:0,class:"w-300px!",value:e.value,"onUpdate:value":a=>e.value=a},null,8,["value","onUpdate:value"])):(x(),v(t,{key:1,value:e.value,"onUpdate:value":a=>e.value=a,"checked-value":"enabled","unchecked-value":"disabled"},null,8,["value","onUpdate:value"])),D("div",X,k(e.ps),1)]),_:2},1024)):C("",!0),"pwd"===e.name&&y(o)?(x(),v(r,{key:1,class:"list_box"},{default:g(()=>[D("div",Y,k(e.name),1),f(d,{"icon-name":"refresh",value:e.value,"onUpdate:value":a=>e.value=a,class:"w-300px!",onClick:i,placeholder:"Please enter root password"},null,8,["value","onUpdate:value"])]),_:2},1024)):C("",!0)]))),128)),D("div",Z,[f(_,{type:"primary",onClick:l},{default:g(()=>[h(k(e.$t("Public.Btn.Save")),1)]),_:1})]),f(m,null,{default:g(()=>[D("li",null,k(e.$t("Plugin.MongoDB.index_1")),1)]),_:1})]),_:1},8,["show"])}}}),[["__scopeId","data-v-872a97b6"]]),ae=_({__name:"index",setup(e,{expose:a}){const n=c("None"),{loading:t,setLoading:s}=r(),l=async()=>{try{s(!0);const{message:e}=await R();F(e)&&(n.value=e.result?e.result:"None")}finally{s(!1)}};return l(),a({init:l}),(e,a)=>{const s=G,l=I;return x(),v(l,{class:"h-610px",show:y(t)},{default:g(()=>[f(s,{log:y(n)},null,8,["log"])]),_:1},8,["show"])}}}),ne=_({__name:"index",setup(s){const{t:l}=m(),o=c("service"),i=[{key:"service",label:l("Security.History.Index_10"),component:a},{key:"version",label:l("Plugin.Ftp.index_9"),component:t},{key:"database",label:l("Site.PHP.add_site_16"),component:J},{key:"config",label:l("Public.Btn.Config"),component:ee},{key:"file",label:l("Site.Config.index_15"),data:{path:"/www/server/mongodb/config.conf"},component:n},{key:"log",label:l("Ftp.Table.index_15"),component:ae}];return(a,n)=>{const t=e;return x(),v(t,{value:y(o),"onUpdate:value":n[0]||(n[0]=e=>j(o)?o.value=e:null),data:i},null,8,["value"])}}});export{ne as default};
