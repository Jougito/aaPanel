const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index124.js?v=1760428868419","js/index.vue_vue_type_script_setup_true_lang5.js?v=1760428868419","js/index.vue_vue_type_script_setup_true_lang6.js?v=1760428868419","js/page_layout.js?v=1760428868419","js/vue.js?v=1760428868419","js/__commonjsHelpers__.js?v=1760428868419","js/naive.js?v=1760428868419","js/common.js?v=1760428868419","js/public.js?v=1760428868419","css/public.css?v=1760428868419","css/page_layout.css?v=1760428868419","css/index15.css?v=1760428868419","js/index.vue_vue_type_script_setup_true_lang7.js?v=1760428868419","js/index.js?v=1760428868419","css/index109.css?v=1760428868419","js/index.vue_vue_type_script_setup_true_lang12.js?v=1760428868419","js/index.vue_vue_type_script_setup_true_lang8.js?v=1760428868419","js/index108.js?v=1760428868419","css/index21.css?v=1760428868419","js/index.vue_vue_type_script_setup_true_lang.js?v=1760428868419","js/index101.js?v=1760428868419","js/theme-monokai.js?v=1760428868419","js/organization.js?v=1760428868419","js/index125.js?v=1760428868419","js/index105.js?v=1760428868419","css/index19.css?v=1760428868419","js/custom.js?v=1760428868419"])))=>i.map(i=>d[i]);
import{t as e,i as a,z as t,a8 as n,d as i,x as l,a as r,w as s}from"./page_layout.js?v=1760428868419";import{_ as o}from"./index.js?v=1760428868419";import{_ as d}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1760428868419";import{_ as p}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1760428868419";import{_ as c}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1760428868419";import{_,c as u,f as m,e as g,a as b,d as x,h}from"./public.js?v=1760428868419";import{_ as y}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1760428868419";import{_ as v}from"./index108.js?v=1760428868419";import{_ as w}from"./index.vue_vue_type_script_setup_true_lang.js?v=1760428868419";import{V as f}from"./index101.js?v=1760428868419";import"./theme-monokai.js?v=1760428868419";import{k as C,a0 as k,P as S,r as T,e as j,R as U,V as P,W as E,a3 as O,U as $,a2 as R,an as L,S as D,a4 as q,N as I,ak as A,j as z,_ as N}from"./vue.js?v=1760428868419";import{dR as V,au as J,dV as M,da as F,aC as K,dS as W}from"./naive.js?v=1760428868419";import{g as B}from"./organization.js?v=1760428868419";const{t:G}=a.global,H=a=>e.post("/crontab/script/test_script",{data:JSON.stringify(a)},{requestOptions:{loading:G("Crontab.Api.index_4"),errorMessage:!1}}),Q=a=>e.post("/crontab/script/get_script_logs",{data:JSON.stringify(a)}),X=(a,t=!0)=>e.post("/crontab/script/remove_script",a,{requestOptions:{loading:t?G("Security.Api.Index_3"):"",successMessage:t}}),Y={class:"p-20px"},Z=C({__name:"index",props:{data:{}},setup(a,{expose:n}){const i=t(),{theme:l}=k(i),{t:r}=S(),s=a,{isEdit:o,row:d,id:p,getList:c}=s.data,u=T(null),m=[{value:"string",label:r("Crontab.Script.index_9")},{value:"int",label:r("Crontab.Script.index_10")},{value:"float",label:r("Crontab.Script.index_11")}],g=[{value:"1",label:r("Crontab.Script.index_12")},{value:"0",label:r("Crontab.Script.index_13")}],b={name:{required:!0,trigger:["blur","change"],message:r("Crontab.Planned.index_49")},custom:{required:!0,trigger:["blur","change"],message:r("Crontab.arrange.index_28")},argsTitle:{required:!0,trigger:["blur","change"],message:r("Security.Conf.Index_28")},argsExplain:{required:!0,trigger:["blur","change"],message:r("Security.Conf.Index_28")}},x=j({name:"",type:"string",argsType:"0",argsTitle:"",argsExplain:"",custom:"",remark:""}),h=()=>({name:x.name,return_type:x.type,is_args:x.argsType,ps:x.remark,script:x.custom,type_id:p,args_title:x.argsTitle,args_ps:x.argsExplain,...o?{script_id:null==d?void 0:d.script_id}:null});n({onConfirm:async()=>{var a,t;await(null==(a=u.value)?void 0:a.validate()),o?await(t=h(),e.post("/crontab/script/modify_script",{data:JSON.stringify(t)},{requestOptions:{loading:G("Crontab.Api.index_5"),successMessage:!0}})):await(a=>e.post("/crontab/script/create_script",{data:JSON.stringify(a)},{requestOptions:{loading:G("Security.Api.Index_4"),successMessage:!0}}))(h()),null==c||c()}});return o&&d&&(x.name=d.name,x.type=d.return_type,x.argsType=d.is_args.toString(),x.argsTitle=d.args_title,x.argsExplain=d.args_ps,x.custom=d.script,x.remark=d.ps),(e,a)=>{const t=J,n=V,i=M,r=F,s=w,o=_;return P(),U("div",Y,[E(s,{ref_key:"formRef",ref:u,model:$(x),rules:b},{default:O(()=>[E(n,{label:e.$t("Docker.Compose.form.index_3"),path:"name"},{default:O(()=>[E(t,{class:"w-360px!",value:$(x).name,"onUpdate:value":a[0]||(a[0]=e=>$(x).name=e),placeholder:e.$t("Crontab.Planned.index_49")},null,8,["value","placeholder"])]),_:1},8,["label"]),E(n,{label:e.$t("Crontab.Script.index_2")},{default:O(()=>[E(i,{class:"w-150px!",value:$(x).type,"onUpdate:value":a[1]||(a[1]=e=>$(x).type=e),options:m},null,8,["value"])]),_:1},8,["label"]),E(r,null,{default:O(()=>[E(n,{label:e.$t("Crontab.Script.index_5")},{default:O(()=>[E(i,{class:"w-80px!",value:$(x).argsType,"onUpdate:value":a[2]||(a[2]=e=>$(x).argsType=e),options:g},null,8,["value"])]),_:1},8,["label"]),"1"==$(x).argsType?(P(),R(n,{key:0,path:"argsTitle"},{default:O(()=>[E(t,{class:"w-110px!",value:$(x).argsTitle,"onUpdate:value":a[3]||(a[3]=e=>$(x).argsTitle=e),placeholder:e.$t("Crontab.Script.index_51")},null,8,["value","placeholder"])]),_:1})):L("",!0),"1"==$(x).argsType?(P(),R(n,{key:1,path:"argsExplain"},{default:O(()=>[E(t,{class:"w-145px!",value:$(x).argsExplain,"onUpdate:value":a[4]||(a[4]=e=>$(x).argsExplain=e),placeholder:e.$t("Crontab.Script.index_52")},null,8,["value","placeholder"])]),_:1})):L("",!0)]),_:1}),E(n,{label:" ",path:"custom"},{default:O(()=>[E($(f),{theme:"dark"===$(l)?"monokai":"chrome",value:$(x).custom,"onUpdate:value":a[5]||(a[5]=e=>$(x).custom=e),class:"w-360px border-solid h-150px border-1px border-#ccc rounded-4px leading-[1.4]"},null,8,["theme","value"])]),_:1}),E(n,{label:e.$t("Docker.Template.add.index_3")},{default:O(()=>[E(t,{class:"w-360px!",value:$(x).remark,"onUpdate:value":a[6]||(a[6]=e=>$(x).remark=e),placeholder:e.$t("Crontab.arrange.index_27")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"]),E(o,null,{default:O(()=>[D("li",null,q(e.$t("Crontab.Script.index_6")),1),D("li",null,q(e.$t("Crontab.Script.index_7")),1),D("li",null,q(e.$t("Crontab.Script.index_8")),1)]),_:1})])}}}),ee=C({__name:"index",setup(a){const t=N(()=>r(()=>import("./index124.js?v=1760428868419"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22]))),_=N(()=>r(()=>import("./index125.js?v=1760428868419"),__vite__mapDeps([23,24,3,4,5,6,7,8,9,10,25,13,14,1,2,11,12,15,16,17,18,19,20,21,22]))),w=N(()=>r(()=>import("./custom.js?v=1760428868419"),__vite__mapDeps([26,19,4,5,6,7]))),f=T("1"),C=T([]),{t:k}=S(),U=()=>{Y.data.isEdit=!1,Y.data.id=f.value,Y.show=!0},{keys:L,table:D,columns:V}=u([{type:"selection",width:40},{key:"name",title:k("Site.TableRow.index_2")},{key:"script_type",title:k("Ftp.Table.index_3")},{key:"return_type",title:k("Crontab.Script.index_2")},{key:"ps",title:k("Docker.Template.add.index_3")},{key:"name",title:k("Docker.Container.index_9"),render:e=>n(e.create_time)},{key:"name",title:k("Crontab.Planned.index_12"),render:e=>n(e.last_exec_time)},m({title:k("Public.Table.Operation"),width:240,options:e=>[{label:k("Docker.LocalImage.pull.index_12"),onClick:()=>{if(e.is_args)return te.show=!0,void(te.data.row=e);Q("",e)}},{label:k("Site.TableOP.index_7"),onClick:()=>{Y.title=k("Crontab.arrange.index_38"),Y.data.isEdit=!0,Y.data.row=e,Y.data.id=f.value,Y.show=!0}},{label:k("Ftp.Table.index_15"),onClick:()=>{ee.title=k("Crontab.Planned.index_6",[e.name]),ee.data.id=e.script_id,ee.show=!0}},{label:k("Public.Btn.Del"),onClick:()=>{b({title:"".concat(k("Ftp.Table.index_10")," ").concat(e.name," ").concat(k("Crontab.Script.index_3")),content:k("Crontab.Script.index_4"),onConfirm:async()=>{await X({script_id:e.script_id}),H()}})}}]})]),J=[{key:"delete",type:"confirm",label:k("Crontab.Script.index_42"),confirm:{title:k("Crontab.Planned.index_16",[k("Crontab.Script.index_42")]),desc:k("Crontab.Planned.index_17",[k("Crontab.Script.index_42")]),columns:[V.value[1]],api:e=>X({script_id:e.script_id},!1),done:()=>{H()}}}],M=j({p:1,rows:10,search:""}),{loading:F,setLoading:G}=x(!0);(async()=>{const{message:e}=await B();s(e)&&(C.value=e.map(e=>({label:e.name,key:e.type_id.toString()})))})();const H=async()=>{try{G(!0);const{message:t}=await(a=I({...M,type_id:f.value}),e.post("/crontab/script/get_script_list",{data:JSON.stringify(a)}));i(t)?(D.data=t.data.map(e=>({...e,id:e.script_id})),D.total=l(t.page)):(D.data=[],D.total=0)}finally{L.value=[],G(!1)}var a};H();const Q=(e,a)=>{b({title:k("Crontab.Planned.index_13"),content:k("Crontab.arrange.index_1",[a.name]),onConfirm:()=>{ae.data.row=a,ae.data.args=e,ae.show=!0}})},Y=g(k("Crontab.Script.index_1"),{getList:H}),ee=g(),ae=g(k("Crontab.Planned.index_23"),{getList:H}),te=g(k("Crontab.Script.index_44"),{callback:Q});return(e,a)=>{const n=v,i=K,l=y,r=h,s=c,u=p,m=d,g=o,b=W;return P(),R(b,{class:"p-16px"},{default:O(()=>[E(n,{value:$(f),"onUpdate:value":[a[0]||(a[0]=e=>A(f)?f.value=e:null),H],options:$(C)},null,8,["value","options"]),E(m,{feedback:!0},{toolsLeft:O(()=>[E(i,{type:"primary",onClick:U},{default:O(()=>[z(q(e.$t("Crontab.Script.index_1")),1)]),_:1})]),toolsRight:O(()=>[E(l,{value:$(M).search,"onUpdate:value":a[1]||(a[1]=e=>$(M).search=e),placeholder:e.$t("WP.Sets.index_15"),onSearch:H},null,8,["value","placeholder"])]),table:O(()=>[E(r,{"checked-row-keys":$(L),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>A(L)?L.value=e:null),loading:$(F),data:$(D).data,columns:$(V)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:O(()=>[E(s,{"checked-row-keys":$(L),"onUpdate:checkedRowKeys":a[3]||(a[3]=e=>A(L)?L.value=e:null),data:$(D).data,options:J},null,8,["checked-row-keys","data"])]),pageRight:O(()=>[E(u,{page:$(M).p,"onUpdate:page":a[4]||(a[4]=e=>$(M).p=e),"page-size":$(M).rows,"onUpdate:pageSize":a[5]||(a[5]=e=>$(M).rows=e),"item-count":$(D).total,onRefresh:H},null,8,["page","page-size","item-count"])]),_:1}),E(g,{show:$(Y).show,"onUpdate:show":a[6]||(a[6]=e=>$(Y).show=e),title:$(Y).title,data:$(Y).data,width:600,footer:!0,component:Z},null,8,["show","title","data"]),E(g,{show:$(ae).show,"onUpdate:show":a[7]||(a[7]=e=>$(ae).show=e),title:$(ae).title,data:$(ae).data,width:400,"min-height":200,component:$(_)},null,8,["show","title","data","component"]),E(g,{show:$(te).show,"onUpdate:show":a[8]||(a[8]=e=>$(te).show=e),title:$(te).title,data:$(te).data,width:400,footer:!0,component:$(w)},null,8,["show","title","data","component"]),E(g,{show:$(ee).show,"onUpdate:show":a[9]||(a[9]=e=>$(ee).show=e),title:$(ee).title,data:$(ee).data,width:800,"min-height":550,footer:!1,component:$(t)},null,8,["show","title","data","component"])]),_:1})}}}),ae=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));export{H as e,Q as g,ae as i};
