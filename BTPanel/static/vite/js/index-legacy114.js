System.register(["./index-legacy105.js?v=1760428868419","./page_layout-legacy.js?v=1760428868419","./index-legacy17.js?v=1760428868419","./public-legacy.js?v=1760428868419","./vue-legacy.js?v=1760428868419","./naive-legacy.js?v=1760428868419","./common-legacy.js?v=1760428868419","./__commonjsHelpers__-legacy.js?v=1760428868419","./index-legacy.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1760428868419","./backup-info-legacy.js?v=1760428868419","./utils-legacy.js?v=1760428868419","./soft-legacy.js?v=1760428868419","./site-legacy.js?v=1760428868419"],function(e,s){"use strict";var a,t,r,l,n,o,c,i,_,p,u,g,d,m,y,f,x,j,v,h,w,k,b,C;return{setters:[e=>{a=e._},e=>{t=e.o,r=e._,l=e.d},e=>{n=e.c,o=e.g},e=>{c=e.a},e=>{i=e.k,_=e.P,p=e.e,u=e.o,g=e.b,d=e.R,m=e.V,y=e.an,f=e.W,x=e.S,j=e.a3,v=e.j,h=e.a2,w=e.U},e=>{k=e.dk,b=e.bH,C=e.da},null,null,null,null,null,null,null,null],execute:function(){const s={class:"p-16px"},I={class:"h-250px"};e("default",i({__name:"index",props:{onRefresh:{}},emits:["close"],setup(e,{emit:i}){const{t:R}=_(),z=i,H=e,M=p({task_msg:"",exec_log:"",progress:0}),S=()=>{c({title:R("Config.Backup.index_14"),content:R("Config.Migrate.index_24"),onConfirm:async()=>{q&&clearInterval(q),await n(),z("close")}})};let q=null;const B=async()=>{const{message:e}=await o();l(e)&&(M.task_msg=e.migrate_msg,M.exec_log=e.migrate_log,M.progress=e.migrate_progress,2!==e.run_status&&3!==e.run_status||(q&&clearInterval(q),2===e.run_status?H.onRefresh("success",{panel_addr:e.panel_addr,panel_user:e.panel_user,panel_password:e.panel_password,start_time:e.start_time,last_update:e.last_update}):H.onRefresh("error",{errData:e.err_info,start_time:e.start_time,last_update_time:e.last_update,server_ip:e.server_ip,ssh_port:e.ssh_port,ssh_user:e.ssh_user,password:e.password}),z("close")))};return u(()=>{B(),q=window.setInterval(()=>{B()},2e3)}),g(()=>{q&&clearInterval(q)}),(e,l)=>{const n=t,o=k,c=b,i=r,_=C,p=a;return m(),d("div",s,[y("",!0),f(o,{type:"warning"},{default:j(()=>[l[1]||(l[1]=x("span",{class:"color-warning"},"Migration is in progress, please do not close the page, if you have any questions please contact us in time ",-1)),f(n,{href:"mailto:support@aapanel.com",target:"_blank"},{default:j(()=>l[0]||(l[0]=[v("support@aapanel.com",-1)])),_:1,__:[0]})]),_:1,__:[1]}),f(_,{class:"flex-nowrap! items-center my-10px",size:5},{default:j(()=>[f(c,{height:24,percentage:w(M).progress,"indicator-placement":"inside",processing:w(M).progress<100,status:"success"},null,8,["percentage","processing"]),w(M).progress<100?(m(),h(i,{key:0,name:"base-error",class:"text-error hover:text-#777777",size:20,onClick:S})):y("",!0)]),_:1}),x("div",I,[f(p,{log:w(M).exec_log},null,8,["log"])])])}}}))}}});
