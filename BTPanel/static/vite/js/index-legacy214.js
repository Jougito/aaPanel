System.register(["./index-legacy245.js?v=1760428868419","./public-legacy.js?v=1760428868419","./page_layout-legacy.js?v=1760428868419","./vue-legacy.js?v=1760428868419","./naive-legacy.js?v=1760428868419","./common-legacy.js?v=1760428868419","./__commonjsHelpers__-legacy.js?v=1760428868419"],function(e,a){"use strict";var l,t,s,n,i,o,r,c,u,d,m,p,f,h,v,_,x,y,S,w,g,b,k,L,C,$,j,z,A,R,N,U,D,P,T,H,I,J;return{setters:[e=>{l=e._},e=>{t=e.ay,s=e._,n=e.a,i=e.ad,o=e.az,r=e.aA},e=>{c=e.d,u=e.fl,d=e.S,m=e._,p=e.m,f=e.p,h=e.q},e=>{v=e.r,_=e.k,x=e.P,y=e.af,S=e.e,w=e.c,g=e.o,b=e.a5,k=e.R,L=e.V,C=e.S,$=e.W,j=e.a3,z=e.a4,A=e.U,R=e.j,N=e.ak,U=e.an,D=e.a2},e=>{P=e.ek,T=e.dP,H=e.aC,I=e.da,J=e.dk},null,null],execute:function(){var a=document.createElement("style");a.textContent="[data-v-1cd65fd9] .n-tabs-tab__label{height:24px}[data-v-1cd65fd9] .n-tabs-tab--active{color:#20a53a!important}.icon-box[data-v-5d5ba104]{rotate:-90deg;transform-origin:center;display:flex;justify-content:center;align-items:center;color:#666;background-color:#def7e8;border-radius:50%;width:50px;height:50px;margin:10px auto}:deep(.n-tabs-tab__label){height:24px}:deep(.n-tabs-tab--active){color:#20a53a!important}\n/*$vite$:1*/",document.head.appendChild(a);const O=v(!1),q=v({}),E=async e=>{try{O.value=!0;const{message:a}=await t({hash:e});c(a)&&(q.value=a)}finally{O.value=!1}},M={class:"text-#20a53a"},V={class:"mt-16px"},W=f(_({__name:"index",props:{row:{},onRefresh:{}},setup(e){const{t:a}=x(),l=e,{row:t}=y(l),o=v("all"),r=S({domains:t.value.user_for.sites||[]}),f=v([]),h=v([]),_=w(()=>"matched"===o.value?h.value:f.value),U=({option:e})=>{const a=e.match?"ssl-lock":"ssl-unlock",l=e.match?"text-#20a53a":"text-error";return $(I,{size:5,class:"items-center flex-nowrap!"},{default:()=>[$(m,{name:a,class:l,size:18},null),$("div",{class:"truncate w-full"},[e.label])]})},D=()=>{n({title:"Deploy SSL Certificate",content:r.domains.length?"Are you sure you want to deploy this certificate?":"Are you sure you want to cancel the deployment",onConfirm:async()=>{const{message:e}=await i({hash:t.value.hash,domains:JSON.stringify(r.domains)});c(e)&&(e.faild?p.error(`${a("SSL.index_31")}（${e.faildList.map(e=>e.siteName).join(",")}）`):p.success(a("SSL.index_32")),l.onRefresh())}})},J=e=>e.map(e=>({label:e.name,value:e.name,match:e.match}));return g(()=>{(async()=>{await E(t.value.hash);const e=q.value.sites.filter(e=>e.match),a=q.value.sites.filter(e=>!e.match);f.value=J([...e,...a]),h.value=J(e),r.domains=r.domains.filter(e=>f.value.some(a=>a.value===e))})()}),(e,a)=>{const l=b("i18n-t"),n=P,i=T,c=u,p=d,f=H,h=m,v=s;return L(),k("div",null,[C("div",null,[$(l,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:j(()=>[C("span",M,z(A(t)?.verify_domains?.join(",")),1)]),_:1}),a[2]||(a[2]=C("span",null," site",-1))]),$(i,{type:"segment",animated:"",value:A(o),"onUpdate:value":a[0]||(a[0]=e=>N(o)?o.value=e:null),class:"my-10px"},{default:j(()=>[$(n,{name:"all"},{default:j(()=>[R(z(e.$t("SSL.index_28")),1)]),_:1}),$(n,{name:"matched"},{default:j(()=>[R(z(e.$t("SSL.index_27")),1)]),_:1})]),_:1},8,["value"]),$(p,{show:A(O)},{default:j(()=>[$(c,{"render-source-label":U,"render-target-label":U,value:A(r).domains,"onUpdate:value":a[1]||(a[1]=e=>A(r).domains=e),options:A(_),"source-filterable":"","virtual-scroll":""},null,8,["value","options"])]),_:1},8,["show"]),C("div",V,[$(f,{type:"primary",onClick:D},{default:j(()=>[R(z(e.$t("SSL.index_29")),1)]),_:1})]),$(v,{class:"mt-20px"},{default:j(()=>[C("li",null,[$(h,{name:"ssl-lock",class:"text-#20a53a",size:18}),a[3]||(a[3]=C("span",{class:"ml-8px"},"This SSL is applicable to the this domain",-1))]),C("li",null,[$(h,{name:"ssl-unlock",class:"text-error",size:18}),a[4]||(a[4]=C("span",{class:"ml-8px"},'After using this SSL, accessing the domain will show a "Not Secure" warning',-1))])]),_:1})])}}}),[["__scopeId","data-v-1cd65fd9"]]),B={key:0,class:"text-#20a53a"},F={class:"icon-box"},G=f(_({__name:"index",props:{row:{}},setup(e){const a=e,{row:l}=y(a),t=S({domains:"",issuer:"",end_date:"",is_match:1}),i=e=>{n({title:"Deploy SSL Certificate",content:0===e?"Are you sure to deploy this SSL certificate to the panel?":"Are you sure you want to restore it?",onConfirm:async()=>{await o({hash:l.value.hash,recover:e}),window.location.href=window.location.href.split("?")[0]+"?_t="+Date.now()}})};return g(()=>{(async()=>{await E(l.value.hash),t.domains=q.value.panel[0].info.subject,t.issuer=q.value.panel[0].info.issuer,t.end_date=q.value.panel[0].info.notAfter,t.is_match=q.value.panel[0].match})()}),(e,a)=>{const n=b("i18n-t"),o=m,r=h,c=I,u=J,p=d,f=H,v=s;return L(),k("div",null,[C("div",null,[$(n,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:j(()=>[A(l)?(L(),k("span",B,z(A(l).verify_domains.join(",")),1)):U("",!0)]),_:1}),a[2]||(a[2]=C("span",null," panel",-1))]),$(p,{show:A(O),class:"my-16px"},{default:j(()=>[$(u,{type:"info","show-icon":!1},{default:j(()=>[$(c,{class:"py-2px text-12px items-center flex-nowrap!"},{default:j(()=>[a[3]||(a[3]=C("b",{class:"text-nowrap!"},"Current SSL",-1)),$(o,{name:"ssl-lock",class:"text-#20a53a",size:18}),$(r,{vertical:""}),C("div",null,[C("div",null,[R(z(e.$t("Config.Safe.index_37")),1),C("b",null,z(A(t).domains),1)]),C("div",null,[R(z(e.$t("Config.Safe.index_38")),1),C("b",null,z(A(t).issuer),1)]),C("div",null,[R(z(e.$t("Config.Safe.index_39")),1),C("b",null,z(A(t).end_date),1)])])]),_:1,__:[3]})]),_:1}),C("div",F,[$(o,{name:"file-back",size:40,color:"#0a8c46"})]),$(u,{type:A(t).is_match?"success":"error","show-icon":!1},{default:j(()=>[$(c,{class:"py-2px text-12px items-center flex-nowrap! text-primary"},{default:j(()=>[a[4]||(a[4]=C("b",{class:"text-nowrap!"},"New SSL",-1)),A(t).is_match?(L(),D(o,{key:0,name:"ssl-lock",class:"text-#20a53a",size:18})):(L(),D(o,{key:1,name:"ssl-unlock",class:"text-error",size:18})),$(r,{vertical:""}),C("div",null,[C("div",null,[R(z(e.$t("Config.Safe.index_37")),1),C("b",null,z(A(l).verify_domains.join(",")),1)]),C("div",null,[R(z(e.$t("Config.Safe.index_38")),1),C("b",null,z(A(l).provider+" "+A(l).issuer),1)]),C("div",null,[R(z(e.$t("Config.Safe.index_39")),1),C("b",null,z(A(l).end_date),1)])])]),_:1,__:[4]})]),_:1},8,["type"])]),_:1},8,["show"]),C("div",null,[$(f,{type:"primary",onClick:a[0]||(a[0]=e=>i(0))},{default:j(()=>[R(z(e.$t("SSL.index_29")),1)]),_:1})]),$(r,{class:"my-16px!"}),$(c,{class:"items-center"},{default:j(()=>[a[6]||(a[6]=C("span",{class:"text-desc"},"Restore to panel self-signed certificate?",-1)),$(f,{type:"primary",ghost:"",onClick:a[1]||(a[1]=e=>i(1))},{default:j(()=>a[5]||(a[5]=[R("Restore",-1)])),_:1,__:[5]})]),_:1,__:[6]}),$(v,{class:"mt-20px"},{default:j(()=>[C("li",null,[$(o,{name:"ssl-lock",class:"text-#20a53a",size:18}),a[7]||(a[7]=C("span",{class:"ml-8px"},"This SSL is applicable to the this panel",-1))]),C("li",null,[$(o,{name:"ssl-unlock",class:"text-error",size:18}),a[8]||(a[8]=C("span",{class:"ml-8px"},'After using this SSL, accessing the panel will show a "Not Secure" warning',-1))])]),_:1})])}}}),[["__scopeId","data-v-5d5ba104"]]),K={class:"text-#20a53a"},Q={class:"mt-16px"},X=_({__name:"index",props:{row:{},onRefresh:{}},setup(e){const{t:a}=x(),l=e,{row:t}=y(l),i=v("all"),o=S({domains:t.value.user_for.mails}),f=v([]),h=v([]),_=w(()=>"matched"===i.value?h.value:f.value),g=({option:e})=>{const a=e.match?"ssl-lock":"ssl-unlock",l=e.match?"text-#20a53a":"text-error";return $(I,{size:5,class:"items-center flex-nowrap!"},{default:()=>[$(m,{name:a,class:l,size:18},null),$("div",{class:"truncate w-full"},[e.label])]})},U=()=>{n({title:"Deploy SSL Certificate",content:o.domains.length?"Are you sure you want to deploy this certificate?":"Are you sure you want to cancel the deployment",onConfirm:async()=>{try{const{message:e}=await r({hash:t.value.hash,domains:JSON.stringify(o.domains)});c(e)&&(e.faild?p.error(`${a("SSL.index_31")}（${e.faildList.map(e=>e.siteName).join(",")}）`):p.success(a("SSL.index_32")))}finally{l.onRefresh()}}})},D=e=>e.map(e=>({label:e.domain,value:e.domain,match:e.match}));return(async()=>{await E(t.value.hash);const e=q.value.mails.filter(e=>e.match),a=q.value.mails.filter(e=>!e.match);f.value=D([...e,...a]),h.value=D(e)})(),(e,a)=>{const l=b("i18n-t"),n=P,r=T,c=u,p=d,f=H,h=m,v=s;return L(),k("div",null,[C("div",null,[$(l,{keypath:"SSL.index_26",tag:"span",scope:"global"},{a:j(()=>[C("span",K,z(A(t)?.verify_domains?.join(",")),1)]),_:1}),a[2]||(a[2]=C("span",null," mail",-1))]),$(r,{type:"segment",animated:"",value:A(i),"onUpdate:value":a[0]||(a[0]=e=>N(i)?i.value=e:null),class:"my-10px"},{default:j(()=>[$(n,{name:"all"},{default:j(()=>[R(z(e.$t("SSL.index_28")),1)]),_:1}),$(n,{name:"matched"},{default:j(()=>[R(z(e.$t("SSL.index_27")),1)]),_:1})]),_:1},8,["value"]),$(p,{show:A(O)},{default:j(()=>[$(c,{"render-source-label":g,"render-target-label":g,value:A(o).domains,"onUpdate:value":a[1]||(a[1]=e=>A(o).domains=e),options:A(_),"source-filterable":"","virtual-scroll":""},null,8,["value","options"])]),_:1},8,["show"]),C("div",Q,[$(f,{type:"primary",onClick:U},{default:j(()=>[R(z(e.$t("SSL.index_29")),1)]),_:1})]),$(v,{class:"mt-20px"},{default:j(()=>[C("li",null,[$(h,{name:"ssl-lock",class:"text-#20a53a",size:18}),a[3]||(a[3]=C("span",{class:"ml-8px"},"This SSL is applicable to the this domain",-1))]),C("li",null,[$(h,{name:"ssl-unlock",class:"text-error",size:18}),a[4]||(a[4]=C("span",{class:"ml-8px"},'After using this SSL, accessing the domain will show a "Not Secure" warning',-1))])]),_:1})])}}});e("default",_({__name:"index",props:{data:{}},setup(e){const{t:a}=x(),t=e,{row:s,onRefresh:n,menu:i}=t.data,o=v("site"),r=[{key:"site",label:a("Home.index_68"),component:W,data:{row:s,onRefresh:n}},{key:"mail",label:"Mail",component:X,data:{row:s,onRefresh:n}},{key:"panel",label:"Panel",component:G,data:{row:s}}];return o.value=i||"site",(e,a)=>{const t=l;return L(),D(t,{value:A(o),"onUpdate:value":a[0]||(a[0]=e=>N(o)?o.value=e:null),data:r},null,8,["value"])}}}))}}});
