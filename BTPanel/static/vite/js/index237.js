import{_ as e,n as t,d as a,p as l,am as i}from"./page_layout.js?v=1760428868419";import{b6 as s,b7 as n}from"./site.js?v=1760428868419";import{u as o}from"./index84.js?v=1760428868419";import{u as d}from"./public.js?v=1760428868419";import{a as r,_ as u}from"./index.vue_vue_type_script_setup_true_lang14.js?v=1760428868419";import{e as p}from"./file.js?v=1760428868419";import{k as _,P as m,r as c,c as v,R as x,V as S,S as f,W as g,a4 as h,F as y,O as b,an as w,a3 as D,j,U as C,H as $,ak as T,I as k,ap as P}from"./vue.js?v=1760428868419";import{dc as H,dh as M,da as z,_ as R,eg as I,df as U}from"./naive.js?v=1760428868419";import"./common.js?v=1760428868419";import"./__commonjsHelpers__.js?v=1760428868419";import"./index133.js?v=1760428868419";import"./index.vue_vue_type_script_setup_true_lang5.js?v=1760428868419";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1760428868419";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1760428868419";import"./index.vue_vue_type_script_setup_true_lang12.js?v=1760428868419";import"./index.vue_vue_type_script_setup_true_lang8.js?v=1760428868419";import"./index131.js?v=1760428868419";import"./php.js?v=1760428868419";import"./soft.js?v=1760428868419";import"./soft2.js?v=1760428868419";import"./useOperate.js?v=1760428868419";import"./useModal2.js?v=1760428868419";import"./index.vue_vue_type_script_setup_true_lang15.js?v=1760428868419";import"./index.js?v=1760428868419";import"./index.vue_vue_type_script_setup_true_lang.js?v=1760428868419";const O={class:"p-24px"},F={class:"flex"},V={class:"flex-1 ml-14px pt-6px"},W={class:"text-19px font-bold text-font1"},q={class:"site-content mt-24px"},A={class:"site-size"},B={class:"site-title"},E={class:"site-path"},G={class:"value"},J={class:"font-bold text-error"},K={key:1},L={key:0},N={class:"site-time"},Q={key:0,class:"site-db"},X={class:"db-name"},Y={class:"db-size"},Z={class:"db-time"},ee={class:"mt-24px text-13px text-error"},te={key:0},ae={key:1,class:"mt-6px"},le={key:2,class:"mt-6px",style:{color:"var(--color-text-5)"}},ie={class:"text-error font-bold"},se={key:3,class:"mt-6px"},ne=l(_({__name:"verify",props:{data:{}},emits:["setConfirm"],setup(l,{expose:i,emit:n}){const{t:o}=m(),d=l,r=n,{rows:u,type:_,delSite:T}=d.data,k=c(!0),P=c(!0),z=v(()=>!!_.find(e=>"database"===e)),R=v(()=>!!_.find(e=>"path"===e)),I=c([]),U=c(5);return(()=>{r("setConfirm",{type:"error",disabled:!0,text:o("Site.DelSite.ContentText16",[U.value])});const e=setInterval(()=>{U.value--,r("setConfirm",{text:o("Site.DelSite.ContentText16",[U.value])}),0===U.value&&(clearInterval(e),r("setConfirm",{disabled:!1,text:o("Site.DelSite.ContentText16")}))},1e3)})(),(async()=>{const{message:e}=await s({ids:u.map(e=>e.id)});a(e)&&(I.value=e.data.map(e=>{const{database:t}=e;return a(t)&&(t.addtime_show=t.addtime.split(" ")[0],t.is_time_rule=Math.round(Date.now()/1e3)-t.st_time>2592e3&&t.total>10240),{...e,addtime_show:e.addtime.split(" ")[0],is_time_rule:Math.round(Date.now()/1e3)-e.st_time>2592e3&&e.total>10240}}))})(),(async()=>{const{message:e}=await p();a(e)&&(k.value=e.status,P.value=e.status_db)})(),i({onConfirm:async({hide:e})=>{await(null==T?void 0:T(e))}}),(l,i)=>{const s=e,n=H,o=M;return S(),x("div",O,[f("div",F,[g(s,{name:"base-warning",size:"34",color:"#f0a020"}),f("div",V,[f("div",W,h(l.$t("Site.DelSite.ContentText7")),1)])]),f("div",q,[(S(!0),x(y,null,b(C(I),e=>(S(),x("div",{key:e.name,class:"content-item"},[f("div",A,[f("div",B,[g(n,null,{default:D(()=>[j(h(l.$t("Site.DelSite.index_3"))+": "+h(e.name),1)]),_:2},1024)]),g(o,{trigger:"hover"},{trigger:D(()=>[f("div",E,[f("div",null,h(l.$t("Site.DelSite.index_2"))+":",1),f("div",G,h(e.path),1),f("div",null,[i[1]||(i[1]=f("span",null,"(",-1)),e.limit?(S(),x(y,{key:0},[f("span",J,h(l.$t("Site.DelSite.index_9")),1),i[0]||(i[0]=f("span",{class:"glyphicon glyphicon-info-sign text-error"},null,-1))],64)):(S(),x("span",K,h(C(t)(e.total)),1)),i[2]||(i[2]=f("span",null,")",-1))])])]),default:D(()=>[f("div",null,[e.limit?(S(),x("p",L,h(l.$t("Site.DelSite.ContentText8")),1)):w("",!0),f("p",null,[f("span",null,h(l.$t("Site.DelSite.index_4"))+": "+h(e.path),1),f("span",null," ("+h((e.limit?"greater than ":"")+C(t)(e.total))+")",1)])])]),_:2},1024),f("div",N,[g(o,{trigger:"hover",disabled:!e.is_time_rule},{trigger:D(()=>[f("div",null,[f("span",null,h(l.$t("Site.DelSite.index_5"))+": ",1),f("span",{class:$({"text-error":e.is_time_rule})},h(e.addtime_show),3)])]),default:D(()=>[f("div",null,[f("p",null,h(l.$t("Site.DelSite.ContentText9")),1),f("p",null,h(l.$t("Site.DelSite.index_6"))+": "+h(e.addtime_show),1)])]),_:2},1032,["disabled"])])]),C(z)&&C(a)(e.database)?(S(),x("div",Q,[f("div",X,[g(n,null,{default:D(()=>[j(h(l.$t("Home.index_70"))+": "+h(e.name),1)]),_:2},1024)]),f("div",Y,[g(o,{trigger:"hover"},{trigger:D(()=>[j(h(l.$t("Site.DelSite.index_8"))+": "+h(C(t)(e.database.total)),1)]),default:D(()=>[f("div",null,[f("p",null,h(l.$t("Site.DelSite.ContentText10")),1),f("p",null,h(l.$t("Site.PHP.add_site_16"))+": "+h(C(t)(e.database.total)),1)])]),_:2},1024)]),f("div",Z,[g(o,{trigger:"hover",disabled:!e.database.is_time_rule},{trigger:D(()=>[f("div",null,[f("span",null,h(l.$t("Site.DelSite.index_5"))+": ",1),f("span",{class:$({"text-error":e.database.is_time_rule})},h(e.addtime_show),3)])]),default:D(()=>[f("div",null,[f("p",null,h(l.$t("Site.DelSite.ContentText11")),1),f("p",null,h(l.$t("Site.DelSite.index_6"))+": "+h(e.database.addtime_show),1)])]),_:2},1032,["disabled"])])])):w("",!0)]))),128))]),f("div",ee,[C(z)&&!C(P)?(S(),x("div",te,[i[3]||(i[3]=f("span",{class:"glyphicon glyphicon-info-sign"},null,-1)),f("span",null,h(l.$t("Site.DelSite.ContentText12")),1)])):w("",!0),C(R)&&!C(k)?(S(),x("div",ae,[i[4]||(i[4]=f("span",{class:"glyphicon glyphicon-info-sign"},null,-1)),f("span",null,h(l.$t("Site.DelSite.ContentText13")),1)])):w("",!0),C(U)>0?(S(),x("div",le,[f("span",null,h(l.$t("Site.DelSite.ContentText14")),1),f("span",ie,h(C(U)),1),f("span",null,h(l.$t("Site.DelSite.index_1")),1)])):(S(),x("div",se,h(l.$t("Site.DelSite.ContentText15")),1))])])}}}),[["__scopeId","data-v-e67980d1"]]),oe={class:"p-24px"},de={class:"flex pl-12px"},re={class:"flex-1 ml-14px pt-8px"},ue={class:"text-16px font-bold text-font1"},pe={class:"mt-20px"},_e={class:"mr-8px"},me={class:"confirm-calc-box flex items-center h-40px mt-24px mx-12px pl-48px text-14px",style:{backgroundColor:"var(--site-confirm-calc-box-bg)"}},ce={class:"confirm-calc-num mx-12px"},ve={class:"w-80px ml-12px"},xe=_({__name:"index",props:{data:{}},setup(t,{expose:a}){const{t:l}=m(),s=t,{rows:p}=s.data,_=i(),y=o(),b=c(null),w=c([]),$=v(()=>1===w.value.length&&"ftp"===w.value[0]),H=c(0),O=c(0),F=c(null),V=c(!1),W=c("");let q=null;const A=e=>{P(()=>{(e=>{var t;W.value=e,V.value=!0,null==(t=b.value)||t.focus(),q&&clearTimeout(q),q=window.setTimeout(()=>{V.value=!1},3e3)})(e)})()},B=async e=>{1===p.length?(await E(p[0],!0),y.setRefresh(!0),null==e||e()):G(e)},E=async(e,t=!1)=>{const a=w.value.reduce((e,t)=>(e[t]=1,e),{});return await n(Object.assign({id:e.id,webname:e.name},a),t)},G=e=>{d({title:l("Site.Cert.index_56"),hideClose:!0,component:r,data:{title:l("Site.Cert.index_56"),api:E,data:p,callback:t=>{e(),J(t)}}})},J=e=>{y.setRefresh(!0),d({title:l("Site.DelSite.index_11"),width:440,footer:!0,component:u,data:{title:l("Site.Cert.index_56"),data:e,status:"done",columns:[{key:"name",title:l("Site.TableRow.index_1"),ellipsis:{tooltip:{width:"trigger"}}}]}})};return F.value=null,H.value=Math.round(9*Math.random()+1),O.value=Math.round(9*Math.random()+1),a({onConfirm:async({hide:e})=>null==F.value||null==F.value?(A(l("Site.DelSite.ContentText5")),!1):F.value!==H.value+O.value?(A(l("Site.DelSite.ContentText6")),!1):void(0===w.value.length||$.value?await B(e):(d({title:1===p.length?"".concat(l("Site.DelSite.ContentText3")," [").concat(p[0].name,"]"):l("Site.DelSite.ContentText4"),width:740,footer:!0,data:{rows:p,type:w.value,delSite:B},component:ne}),e()))}),(t,a)=>{const l=e,i=R,s=z,n=I,o=U,d=M;return S(),x("div",oe,[f("div",de,[g(l,{name:"base-warning",size:"34",color:"#f0a020"}),f("div",re,[f("div",ue,[f("div",null,h(t.$t("Site.PHP.index_59")),1),f("div",pe,h(t.$t("Site.PHP.index_60")),1)]),g(n,{value:C(w),"onUpdate:value":a[0]||(a[0]=e=>T(w)?w.value=e:null)},{default:D(()=>[g(s,{size:32,class:"items-center h-24px mt-24px"},{default:D(()=>[g(i,{value:"ftp"},{default:D(()=>[j(h(t.$t("Site.PHP.add_site_10")),1)]),_:1}),g(i,{value:"database"},{default:D(()=>[f("span",_e,h(t.$t("Site.PHP.add_site_16")),1),a[3]||(a[3]=f("span",{class:"glyphicon glyphicon-info-sign text-error"},null,-1))]),_:1,__:[3]}),g(i,{value:"path"},{default:D(()=>[j(h(t.$t("Site.PHP.index_20")),1)]),_:1})]),_:1})]),_:1},8,["value"])])]),f("div",me,[f("span",null,h(t.$t("Site.DelSite.index_10"))+":",1),f("span",ce,h(C(H))+" + "+h(C(O)),1),a[4]||(a[4]=f("span",null,"=",-1)),f("div",ve,[g(d,{show:C(V),"onUpdate:show":a[2]||(a[2]=e=>T(V)?V.value=e:null),trigger:"manual",placement:"top-start","arrow-point-to-center":!0,style:k({"--n-color":C(_).errorColor,"--n-text-color":"#fff"})},{trigger:D(()=>[g(o,{ref_key:"inputRef",ref:b,value:C(F),"onUpdate:value":a[1]||(a[1]=e=>T(F)?F.value=e:null),size:"small",placeholder:"","show-button":!1,inputProps:{name:"sum"}},null,8,["value"])]),default:D(()=>[f("div",null,h(C(W)),1)]),_:1},8,["show","style"])])])])}}});export{xe as default};
