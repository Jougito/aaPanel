import{_ as e}from"./index.js?v=1760428868419";import{_ as l}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1760428868419";import{_ as a,e as t,c as i,f as r,a as n,h as o}from"./public.js?v=1760428868419";import{j as s,k as d,l as u,t as p,u as m,m as _}from"./alarm.js?v=1760428868419";import{_ as f}from"./index.vue_vue_type_script_setup_true_lang.js?v=1760428868419";import{_ as v}from"./index99.js?v=1760428868419";import{k as c}from"./page_layout.js?v=1760428868419";import{k as g,P as x,t as w,c as h,r as C,e as b,R as A,V as q,W as y,a3 as k,S as E,U as $,a4 as j,j as U,a2 as M,a7 as T}from"./vue.js?v=1760428868419";import{dR as B,au as P,df as R,aC as L}from"./naive.js?v=1760428868419";import"./common.js?v=1760428868419";import"./__commonjsHelpers__.js?v=1760428868419";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1760428868419";const D={class:"px-20px py-24px"},H={class:"w-300px"},I={class:"w-300px"},K={class:"w-300px"},N={class:"w-300px"},O={class:"w-300px"},S={class:"w-300px"},V={class:"bt-link",href:"",target:"_blank"},W=g({__name:"form-email",props:{isEdit:{type:Boolean},alarm:{},row:{}},emits:["refresh"],setup(e,{expose:l,emit:t}){const i=e,r=t,{t:n}=x(),o=w(i,"isEdit"),u=w(i,"alarm"),p=h(()=>u.value.name),m=C(null),_=b({title:"",qq_mail:"",qq_smtp_pwd:"",hosts:"",port:465,receiveMail:""}),g={title:{trigger:["blur","input"],validator:()=>""===_.title.trim()?new Error(n("Config.Alarm.index_67")):!(_.title.trim().length>15)||new Error(n("Config.Alarm.index_79"))},qq_mail:{trigger:["blur","input"],validator:()=>""!==_.qq_mail.trim()||new Error(n("Config.Alarm.index_80"))},qq_smtp_pwd:{trigger:["blur","input"],validator:()=>""!==_.qq_smtp_pwd.trim()||new Error(n("Config.Alarm.index_81"))},hosts:{trigger:["blur","input"],validator:()=>""!==_.hosts.trim()||new Error(n("Config.Alarm.index_82"))},port:{trigger:["blur","input"],validator:()=>!!_.port||new Error(n("Config.Alarm.index_83"))},receiveMail:{trigger:["blur","input"],validator:()=>""!==_.receiveMail.trim()||new Error(n("Config.Alarm.index_84"))}},U=()=>({sender_type:p.value,sender_data:{title:_.title,send:{qq_mail:_.qq_mail,qq_stmp_pwd:_.qq_smtp_pwd,hosts:_.hosts,port:"".concat(_.port)},receive:_.receiveMail.split("\n").filter(e=>""!==e.trim())}});return(()=>{const{row:e}=i;if(o.value&&e){const{data:l}=e;_.title=l.title,_.qq_mail=l.send.qq_mail,_.qq_smtp_pwd=l.send.qq_stmp_pwd,_.hosts=l.send.hosts,_.port=c(l.send.port),_.receiveMail=l.receive.join("\n")}})(),l({onConfirm:async()=>{var e;await(null==(e=m.value)?void 0:e.validate()),o.value&&i.row?await s({...U(),sender_id:i.row.id}):await d(U()),r("refresh")}}),(e,l)=>{const t=P,i=B,r=R,n=v,o=f,s=a;return q(),A("div",D,[y(o,{ref_key:"formRef",ref:m,model:$(_),rules:g},{default:k(()=>[y(i,{label:e.$t("Config.Alarm.index_43"),path:"title"},{default:k(()=>[E("div",H,[y(t,{value:$(_).title,"onUpdate:value":l[0]||(l[0]=e=>$(_).title=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"]),y(i,{label:e.$t("Config.Alarm.index_71"),path:"qq_mail"},{default:k(()=>[E("div",I,[y(t,{value:$(_).qq_mail,"onUpdate:value":l[1]||(l[1]=e=>$(_).qq_mail=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"]),y(i,{label:e.$t("Config.Alarm.index_72"),path:"qq_smtp_pwd"},{default:k(()=>[E("div",K,[y(t,{value:$(_).qq_smtp_pwd,"onUpdate:value":l[2]||(l[2]=e=>$(_).qq_smtp_pwd=e),type:"password",placeholder:""},null,8,["value"])])]),_:1},8,["label"]),y(i,{label:e.$t("Config.Alarm.index_73"),path:"hosts"},{default:k(()=>[E("div",N,[y(t,{value:$(_).hosts,"onUpdate:value":l[3]||(l[3]=e=>$(_).hosts=e),placeholder:""},null,8,["value"])])]),_:1},8,["label"]),y(i,{label:e.$t("Config.Alarm.index_74"),path:"port"},{default:k(()=>[E("div",O,[y(r,{value:$(_).port,"onUpdate:value":l[4]||(l[4]=e=>$(_).port=e),min:1,max:65535,"show-button":!1,placeholder:""},null,8,["value"])])]),_:1},8,["label"]),y(i,{label:e.$t("Config.Alarm.index_78"),path:"receiveMail"},{default:k(()=>[E("div",S,[y(n,{value:$(_).receiveMail,"onUpdate:value":l[5]||(l[5]=e=>$(_).receiveMail=e),row:8,placeholder:e.$t("Config.Alarm.index_75")},null,8,["value","placeholder"])])]),_:1},8,["label"])]),_:1},8,["model"]),y(s,{class:"mt-4px pl-8px"},{default:k(()=>[E("li",null,j(e.$t("Config.Alarm.index_76")),1),E("li",null,j(e.$t("Config.Alarm.index_77")),1),E("li",null,[E("a",V,j(e.$t("Public.Btn.Help")),1)])]),_:1})])}}}),z={class:"px-20px py-24px"},F={class:"w-300px"},G={class:"w-300px"},J=["href"],Q=g({__name:"form-common",props:{isEdit:{type:Boolean},alarm:{},row:{}},emits:["refresh"],setup(e,{expose:l,emit:t}){const i=e,r=t,{t:n}=x(),o=w(i,"isEdit"),u=w(i,"alarm"),p=h(()=>u.value.name),m=h(()=>u.value.title),_=C(null),c=b({title:"",url:""}),g={title:{trigger:["blur","input"],validator:()=>""!==c.title.trim()||new Error(n("Config.Alarm.index_47"))},url:{trigger:["blur","input"],validator:()=>""!==c.url.trim()||new Error(n("Config.Alarm.index_48"))}},U=()=>({sender_type:p.value,sender_data:{title:c.title,url:c.url,atall:"True"}});return(()=>{const{row:e}=i;if(o.value&&e){const{data:l}=e;c.title=l.title,c.url=l.url}})(),l({onConfirm:async()=>{var e;await(null==(e=_.value)?void 0:e.validate()),o.value&&i.row?await s({...U(),sender_id:i.row.id}):await d(U()),r("refresh")}}),(e,l)=>{const t=P,i=B,r=v,n=f,o=a;return q(),A("div",z,[y(n,{ref_key:"formRef",ref:_,model:$(c),rules:g},{default:k(()=>[y(i,{label:e.$t("Config.Alarm.index_43"),path:"title"},{default:k(()=>[E("div",F,[y(t,{value:$(c).title,"onUpdate:value":l[0]||(l[0]=e=>$(c).title=e),placeholder:e.$t("Config.Alarm.index_44")},null,8,["value","placeholder"])])]),_:1},8,["label"]),y(i,{label:"URL",path:"receiveMail"},{default:k(()=>[E("div",G,[y(r,{value:$(c).url,"onUpdate:value":l[1]||(l[1]=e=>$(c).url=e),row:5,placeholder:e.$t("Config.Alarm.index_45")},null,8,["value","placeholder"])])]),_:1})]),_:1},8,["model"]),y(o,{class:"mt-4px pl-24px"},{default:k(()=>[E("li",null,[E("a",{class:"bt-link",href:$(u).help,target:"_blank"},j(e.$t("Config.Alarm.index_46",[$(m)])),9,J)])]),_:1})])}}}),X={class:"px-20px py-24px"},Y={class:"w-300px"},Z={class:"w-300px"},ee={class:"w-300px"},le={class:"bt-link",href:"",target:"_blank"},ae=g({__name:"form-tg",props:{isEdit:{type:Boolean},alarm:{},row:{}},emits:["refresh"],setup(e,{expose:l,emit:t}){const i=e,r=t,{t:n}=x(),o=w(i,"isEdit"),u=w(i,"alarm"),p=h(()=>u.value.name),m=C(null),_=b({title:"",id:"",token:""}),v={title:{trigger:["blur","input"],validator:()=>""!==_.title.trim()||new Error(n("Config.Alarm.index_67"))},id:{trigger:["blur","input"],validator:()=>""!==_.id.trim()||new Error("Please enter Telegram ID")},token:{trigger:["blur","input"],validator:()=>""!==_.token.trim()||new Error("Please enter Telegram TOKEN")}},c=()=>({sender_type:p.value,sender_data:{title:_.title,my_id:_.id,bot_token:_.token}});return(()=>{const{row:e}=i;if(o.value&&e){const{data:l}=e;_.title=l.title,_.id=l.my_id,_.token=l.bot_token}})(),l({onConfirm:async()=>{var e;await(null==(e=m.value)?void 0:e.validate()),o.value&&i.row?await s({...c(),sender_id:i.row.id}):await d(c()),r("refresh")}}),(e,l)=>{const t=P,i=B,r=f,n=a;return q(),A("div",X,[y(r,{ref_key:"formRef",ref:m,model:$(_),rules:v},{default:k(()=>[y(i,{label:e.$t("Config.Alarm.index_43"),path:"title"},{default:k(()=>[E("div",Y,[y(t,{value:$(_).title,"onUpdate:value":l[0]||(l[0]=e=>$(_).title=e),placeholder:e.$t("Config.Alarm.index_44")},null,8,["value","placeholder"])])]),_:1},8,["label"]),y(i,{label:"ID",path:"id"},{default:k(()=>[E("div",Z,[y(t,{value:$(_).id,"onUpdate:value":l[1]||(l[1]=e=>$(_).id=e),placeholder:"Telegram ID"},null,8,["value"])])]),_:1}),y(i,{label:"TOKEN",path:"token"},{default:k(()=>[E("div",ee,[y(t,{value:$(_).token,"onUpdate:value":l[2]||(l[2]=e=>$(_).token=e),placeholder:"Telegram TOKEN"},null,8,["value"])])]),_:1})]),_:1},8,["model"]),y(n,{class:"mt-4px pl-24px"},{default:k(()=>[E("li",null,j(e.$t("Config.Alarm.index_68")),1),E("li",null,j(e.$t("Config.Alarm.index_69")),1),E("li",null,[E("span",null,j(e.$t("Config.Alarm.index_70")),1),E("a",le,j(e.$t("Public.Btn.Help")),1)])]),_:1})])}}}),te={class:"p-20px"},ie=g({__name:"table-common",props:{row:{},refresh:{}},setup(a){const s=a,d=w(s,"row"),f=(()=>{switch(d.value.name){case"mail":default:return W;case"dingding":case"feishu":case"weixin":return Q;case"tg":return ae}})(),{t:v}=x(),c=new Map([["mail",{title:v("Config.Alarm.index_3")}],["dingding",{title:v("Config.Alarm.index_49")}],["feishu",{title:v("Config.Alarm.index_50")}],["weixin",{title:v("Config.Alarm.index_51")}],["tg",{title:"Telegram"}]]),g=t("",{isEdit:!1,alarm:d.value,onRefresh:()=>{R()}}),h=()=>{g.data.isEdit=!1,g.title=v("Config.Alarm.index_52",[d.value.title]),g.show=!0},{table:C,columns:b}=i([{key:"title",title:(null==(E=c.get(d.value.name))?void 0:E.title)||"--",ellipsis:{tooltip:!0},render:e=>e.original?v("Config.Alarm.index_64",[e.data.title]):e.data.title},{key:"used",title:v("Config.Alarm.index_54"),width:80,render:e=>y("a",{class:["bt-link",e.used?"":"error"],onClick:()=>{M(e)}},[e.used?v("Config.Alarm.index_65"):v("Config.Alarm.index_55")])},r({width:200,options:e=>[{label:v("Config.Alarm.index_56"),show:!e.original,onClick:()=>{T(e)}},{label:v("Public.Btn.Edit"),onClick:()=>{(e=>{g.data.row=e,g.data.isEdit=!0,g.title=v("Config.Alarm.index_53",[d.value.title]),g.show=!0})(e)}},{label:v("Config.Alarm.index_57"),onClick:()=>{B(e)}},{label:v("Config.Alarm.index_58"),onClick:()=>{P(e)}}]})]);var E;const M=e=>{const l=e.used?v("Config.Alarm.index_66"):v("Config.Alarm.index_18");n({title:v("Config.Alarm.index_59_1",[l,d.value.title,e.data.title]),content:v("Config.Alarm.index_59",[l.toLocaleLowerCase(),d.value.title,e.data.title]),onConfirm:async()=>{await _({sender_id:e.id}),e.used=!e.used}})},T=e=>{n({width:400,title:v("Config.Alarm.index_60"),content:v("Config.Alarm.index_61",[e.data.title]),onConfirm:async()=>{await u({sender_type:d.value.name,sender_id:e.id}),C.data.forEach(l=>{l.original=l.id===e.id})}})},B=async e=>{await p({sender_id:e.id})},P=e=>{n({title:v("Config.Alarm.index_62",[d.value.title,e.data.title]),content:v("Config.Alarm.index_63",[d.value.title,e.data.title]),onConfirm:async()=>{await m({sender_id:e.id}),R()}})},R=async()=>{var e;await(null==(e=s.refresh)?void 0:e.call(s)),C.data=d.value.list};return C.data=d.value.list,(a,t)=>{const i=L,r=o,n=l,s=e;return q(),A("div",te,[y(n,null,{toolsLeft:k(()=>[y(i,{type:"primary",onClick:h},{default:k(()=>[U(j(a.$t("Public.Btn.Add")),1)]),_:1})]),table:k(()=>[y(r,{data:$(C).data,columns:$(b)},null,8,["data","columns"])]),_:1}),y(s,{show:$(g).show,"onUpdate:show":t[0]||(t[0]=e=>$(g).show=e),title:$(g).title,data:$(g).data,width:500,footer:!0,component:$(f)},null,8,["show","title","data","component"])])}}}),re=g({__name:"index",props:{row:{},refresh:{}},setup(e){const l=ie;return(e,a)=>(q(),M(T($(l)),{row:e.row,refresh:e.refresh},null,8,["row","refresh"]))}});export{re as default};
