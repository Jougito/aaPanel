System.register(["./page_layout-legacy.js?v=1760428868419","./index-legacy.js?v=1760428868419","./public-legacy.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1760428868419","./backup-info-legacy.js?v=1760428868419","./utils-legacy.js?v=1760428868419","./vue-legacy.js?v=1760428868419","./naive-legacy.js?v=1760428868419"],function(e,t){"use strict";var a,s,o,l,n,i,r,d,p,u,c,_,g,h,m,w,f,x,b,y,v,C,k,M,j,q,T,U,P,S,$,D,O,R,z,B,I,V;return{setters:[e=>{a=e.S,s=e.n,o=e._,l=e.t,n=e.i,i=e.a,r=e.d},e=>{d=e._},e=>{p=e.e,u=e.q,c=e._},e=>{_=e._},e=>{g=e.default},e=>{h=e.u},e=>{m=e.k,w=e.P,f=e.a0,x=e.a2,b=e.V,y=e.U,v=e.a3,C=e.W,k=e.S,M=e.j,j=e.a4,q=e.e,T=e.r,U=e._,P=e.a5},e=>{S=e.dR,$=e.da,D=e.dd,O=e.dh,R=e.dk,z=e.au,B=e.df,I=e.aC,V=e.dS}],execute:function(){const W=m({__name:"index",setup(e){const{t:t}=w(),l=h(),{loading:n,backupData:i}=f(l);return l.getData(),(e,l)=>{const r=D,d=o,p=O,u=$,c=S,h=_,m=a;return b(),x(m,{show:y(n),class:"p-16px"},{default:v(()=>[C(h,{ref:"formRef"},{default:v(()=>[C(c,{label:y(t)("Config.Migrate.index_10")},{default:v(()=>[C(u,null,{default:v(()=>[C(r,{class:"mr-8px"},{default:v(()=>[M(j(y(s)(y(i).disk_use)),1)]),_:1}),k("div",null,[k("span",null,j(y(t)("Config.Migrate.index_11")),1),C(r,{type:"success",class:"ml-16px mr-8px"},{default:v(()=>[M(j(y(s)(y(i).disk_free)),1)]),_:1}),C(p,{trigger:"hover",placement:"top-start"},{trigger:v(()=>[C(d,{name:"base-warning",class:"text-warning mr-4px",size:"16"})]),default:v(()=>[k("span",null,[k("li",null,j(y(t)("Config.Migrate.index_12"))+" "+j(y(s)(1.5*y(i).disk_use)),1),k("li",null,j(y(t)("Config.Migrate.index_13")),1)])]),_:1})])]),_:1})]),_:1},8,["label"]),C(c,{label:"Backup Data"},{default:v(()=>[C(g,{class:"w-600px"})]),_:1})]),_:1},512)]),_:1},8,["show"])}}}),A=(e("g",()=>l.post("/mod/backup_restore/com/get_migrate_progress")),e("c",()=>l.post("/mod/backup_restore/com/stop_migrate",{},{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}})),e("a",()=>l.post("/mod/backup_restore/com/close_migrate_popup",{},{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!1}})),m({__name:"index",setup(e){const a=U(()=>i(()=>t.import("./index-legacy114.js?v=1760428868419"),void 0)),s=U(()=>i(()=>t.import("./migrate-success-legacy.js?v=1760428868419"),void 0)),o=U(()=>i(()=>t.import("./migrate-error-legacy.js?v=1760428868419"),void 0)),{t:g}=w(),h=p(g("Config.Migrate.index_4")),m=p(g("Config.Migrate.index_5"),{onRefresh:(e,t)=>{"success"===e?(f.data=t,f.show=!0):(D.data.errData=t,D.show=!0)}}),f=p(g("Config.Migrate.index_6")),D=p(g("Config.Migrate.index_7"),{onRetry:e=>{D.show=!1,m.show=!1,A.ip=e.server_ip,A.port=e.ssh_port,A.account=e.ssh_user,A.password=e.password,H()}}),O=T(null),A=q({ip:"",port:22,account:"",password:""}),E={ip:{required:!0,message:g("Term.index_9"),trigger:["blur","input"]},port:{required:!0,type:"number",message:g("Security.Conf.Index_28"),trigger:["blur","input"]},account:{required:!0,message:g("Term.index_11"),trigger:["blur","input"]},password:{required:!0,message:g("Term.index_14"),trigger:["blur","input"]}},F=()=>{h.show=!0},G=()=>({auth_type:"password",server_ip:A.ip,ssh_port:A.port,ssh_user:A.account,password:A.password,ps:A.ip}),H=async()=>{await(O.value?.validate()),u({title:g("Config.Migrate.index_8"),content:()=>C("span",null,[C(P("i18n-t"),{keypath:"Config.Migrate.index_9",scope:"global"},{default:()=>[C("b",{class:"color-warning text-2xl"},[M(" "),A.ip,M(" ")])]})]),onConfirm:async()=>{var e;await(e=G(),l.post("/mod/backup_restore/com/ssh_auth_check",e,{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}})),await(e=>l.post("/mod/backup_restore/com/add_migrate_task",e,{requestOptions:{loading:n.global.t("Component.Pay.index_12"),successMessage:!0}}))(G()),m.show=!0}})};return(async()=>{const{message:e}=await l.post("/mod/backup_restore/com/get_migrate_status");r(e)&&e.is_running&&(m.show=!0,A.ip=e.server_ip,A.port=e.ssh_port,A.account=e.ssh_user,A.password=e.password)})(),(e,t)=>{const l=z,n=S,i=B,r=$,p=I,u=_,w=c,q=d,T=V;return b(),x(T,{class:"p-16px"},{default:v(()=>[C(y(R),{type:"warning",class:"mb-16px"},{default:v(()=>[k("span",null,j(y(g)("Config.Migrate.index_1")),1)]),_:1}),C(u,{ref_key:"formRef",ref:O,model:y(A),rules:E},{default:v(()=>[C(r,null,{default:v(()=>[C(n,{label:e.$t("Term.index_8"),path:"ip"},{default:v(()=>[C(l,{class:"w-190px!",value:y(A).ip,"onUpdate:value":t[0]||(t[0]=e=>y(A).ip=e),placeholder:e.$t("Term.index_9")},null,8,["value","placeholder"])]),_:1},8,["label"]),C(n,{path:"port"},{default:v(()=>[C(i,{"show-button":!1,class:"w-80px!",value:y(A).port,"onUpdate:value":t[1]||(t[1]=e=>y(A).port=e),placeholder:e.$t("Docker.Container.create.index_7")},null,8,["value","placeholder"])]),_:1})]),_:1}),C(n,{label:e.$t("Term.index_10"),path:"account"},{default:v(()=>[C(l,{class:"w-280px!",value:y(A).account,"onUpdate:value":t[2]||(t[2]=e=>y(A).account=e),placeholder:e.$t("Term.index_11")},null,8,["value","placeholder"])]),_:1},8,["label"]),C(n,{label:e.$t("Database.index_14"),path:"password"},{default:v(()=>[C(l,{class:"w-280px!",value:y(A).password,"onUpdate:value":t[3]||(t[3]=e=>y(A).password=e),placeholder:e.$t("Term.index_14")},null,8,["value","placeholder"])]),_:1},8,["label"]),C(n,{label:" "},{default:v(()=>[C(p,{type:"primary",onClick:H},{default:v(()=>[M(j(y(g)("Config.Migrate.index_2")),1)]),_:1})]),_:1})]),_:1},8,["model"]),C(w,null,{default:v(()=>[t[8]||(t[8]=k("li",{class:"text-warning font-bold"},"Please use root user",-1)),k("li",null,[C(p,{type:"primary",text:"",onClick:F},{default:v(()=>[M(j(y(g)("Config.Migrate.index_3")),1)]),_:1})])]),_:1,__:[8]}),C(q,{show:y(h).show,"onUpdate:show":t[4]||(t[4]=e=>y(h).show=e),title:y(h).title,data:y(h).data,width:"850","min-height":250,component:W},null,8,["show","title","data"]),C(q,{show:y(m).show,"onUpdate:show":t[5]||(t[5]=e=>y(m).show=e),title:y(m).title,hideClose:!0,data:y(m).data,width:"750","min-height":250,component:y(a)},null,8,["show","title","data","component"]),C(q,{show:y(f).show,"onUpdate:show":t[6]||(t[6]=e=>y(f).show=e),title:y(f).title,hideClose:!0,data:y(f).data,width:"750","min-height":250,component:y(s)},null,8,["show","title","data","component"]),C(q,{show:y(D).show,"onUpdate:show":t[7]||(t[7]=e=>y(D).show=e),title:y(D).title,hideClose:!0,data:y(D).data,width:"750","min-height":250,component:y(o)},null,8,["show","title","data","component"])]),_:1})}}})),E=Object.freeze(Object.defineProperty({__proto__:null,default:A},Symbol.toStringTag,{value:"Module"}));e("i",E)}}});
