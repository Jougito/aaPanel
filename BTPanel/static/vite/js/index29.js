const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index160.js?v=1760428868419","js/index179.js?v=1760428868419","js/__commonjsHelpers__.js?v=1760428868419","js/page_layout.js?v=1760428868419","js/vue.js?v=1760428868419","js/naive.js?v=1760428868419","js/common.js?v=1760428868419","js/public.js?v=1760428868419","css/public.css?v=1760428868419","css/page_layout.css?v=1760428868419","css/index27.css?v=1760428868419","js/index108.js?v=1760428868419","css/index21.css?v=1760428868419","js/index.vue_vue_type_script_setup_true_lang.js?v=1760428868419","js/index.vue_vue_type_script_setup_true_lang8.js?v=1760428868419","js/index.vue_vue_type_script_setup_true_lang2.js?v=1760428868419","js/index98.js?v=1760428868419","css/index13.css?v=1760428868419","js/index99.js?v=1760428868419","css/index14.css?v=1760428868419","js/index161.js?v=1760428868419","js/index.vue_vue_type_script_setup_true_lang5.js?v=1760428868419","js/index.vue_vue_type_script_setup_true_lang6.js?v=1760428868419","css/index15.css?v=1760428868419","css/index79.css?v=1760428868419"])))=>i.map(i=>d[i]);
var e,a=Object.freeze,l=Object.defineProperty;import{_ as t}from"./index.vue_vue_type_script_setup_true_lang.js?v=1760428868419";import{_ as s}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1760428868419";import{k as n,P as p,a0 as o,ah as i,r,c,W as u,t as d,F as v,u as m,e as f,R as _,V as x,a3 as g,S as b,U as h,ak as y,N as k,a2 as w,O as A,j as C,a4 as D,l as j,v as S,am as O,_ as P,w as z,I as R}from"./vue.js?v=1760428868419";import{t as I,i as E,u as q,_ as U,w as T,y as M,bR as B,d as L,bu as N,h as $,m as F,bS as V,a6 as H,a7 as J,l as W,bT as G,q as K,r as Q,a as X,p as Y}from"./page_layout.js?v=1760428868419";import{u as Z,a as ee,C as ae,d as le}from"./public.js?v=1760428868419";import{di as te,e1 as se,dR as ne,au as pe,df as oe,_ as ie,dV as re,G as ce,bJ as ue,aC as de,dd as ve,dh as me,dS as fe}from"./naive.js?v=1760428868419";import{_ as _e}from"./index.vue_vue_type_script_setup_true_lang2.js?v=1760428868419";import{_ as xe}from"./index99.js?v=1760428868419";const ge=(e,a=!1)=>I.post("/mod/docker/com/get_apps",e,{requestOptions:{loading:a?E.global.t("Docker.api.App.index_1"):""}}),be=e=>I.post("/mod/docker/com/get_app_log",e),he=e=>I.post("/mod/docker/com/get_app_installed_log",e),ye=e=>I.post("/mod/docker/com/get_backup_list",e),ke=e=>I.post("/mod/docker/com/backup_app",e,{requestOptions:{loading:E.global.t("Docker.api.App.index_5"),successMessage:!0}}),we=e=>I.post("/mod/docker/com/delete_backup",e,{requestOptions:{loading:E.global.t("Docker.api.App.index_4"),successMessage:!0}}),Ae=e=>I.post("/mod/docker/com/restore_backup",e,{requestOptions:{loading:E.global.t("Docker.api.App.index_6"),successMessage:!0}}),Ce=e=>I.post("/mod/docker/com/upload_backup",e,{headers:{"Content-Type":"multipart/form-data"},requestOptions:{loading:E.global.t("Docker.api.App.index_7"),successMessage:!0}}),De=n({name:"DockerAppCategory",props:{value:{type:String}},setup(e,{emit:a}){const{t:l}=p(),t=q(),{mainWidth:s}=o(t),n=i(e,"value",a),d=r([]),v=c(()=>Math.floor((s.value-480)/100)),m=c(()=>d.value.slice(0,v.value)),f=c(()=>d.value.slice(v.value,d.value.length).map(e=>({label:e.label,key:e.value}))),_=c(()=>f.value.filter(e=>e.key===n.value).length>0),x=c(()=>{const e=f.value.filter(e=>e.key===n.value);return e.length>0?"（".concat(e[0].label,"）"):""}),g=e=>{n.value=e},b=()=>{d.value.unshift({label:l("Docker.App.app_category_0"),value:"installed"}),d.value.unshift({label:l("Public.All"),value:"all"})};return b(),(async()=>{const{message:e}=await((e={})=>I.post("/mod/docker/com/get_tags",e))();T(e)&&(se(e,["sort"],["asc"]),d.value=e.map(e=>({label:e.desc,value:e.type})),b())})(),()=>u("div",{class:"flex gap-10px"},[m.value.map(e=>u(Se,{label:e.label,active:e.value===n.value,onClick:()=>{n.value=e.value}},null)),f.value.length>0?u(te,{trigger:"hover",options:f.value,onSelect:g},{default:()=>[u(Se,{active:_.value},{default:()=>[u("span",{class:"mr-8px"},[l("Docker.App.app_category_1"),x.value]),u(U,{name:"base-arrow-bottom"},null)]})]}):""])}}),je=M({display:"flex",alignItems:"center",justifyContent:"center",minWidth:"80px",height:"32px",padding:"0 10px",borderRadius:"2px",cursor:"pointer",backgroundColor:"var(--docker-type-list-bg)",transition:"all .3s",color:"var(--docker-type-list-text)","&.active":{backgroundColor:"var(--docker-type-list-active-bg)",color:"var(--docker-type-list-active-text)"}}),Se=n({name:"DockerAppCategoryItem",props:{label:{type:String,default:""},active:{type:Boolean,default:!1},onClick:{type:Function}},setup:(e,{emit:a,slots:l})=>()=>u("div",{class:[je,e.active?"active":"","dockerApp-category"],onClick:()=>{a("click")}},[l.default?l.default():e.label])});function Oe(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!m(e)}const Pe=n({name:"ConfigForm",props:{data:{type:Object,default:()=>({})},config:{type:Array,default:()=>[]}},setup(e){const a=d(e,"config"),l=i(e,"data");return a.value.forEach(e=>{l.value[e.attr]=e.default}),()=>u(v,null,[a.value.map((e,t)=>{let s;return u(ne,{key:e.attr,label:(n=e.name,n?n.charAt(0).toUpperCase()+n.slice(1):n),showFeedback:t!==a.value.length-1},Oe(s=function(e,a){const{t:l}=p(),t=B(),{attr:s,name:n,type:o}=e,{maxCpu:i,maxMemory:r}=t;let c=e.suffix;"cpus"===s&&(c="".concat(c," ").concat(i));"memory_limit"===s&&(c="".concat(c," ").concat(r," MB"));const d=l("Docker.App.Install.index_7",[n]);switch(o){case"checkbox":return u(v,null,[u(ie,{checked:a.value[s],"onUpdate:checked":e=>a.value[s]=e,class:"items-center"},Oe(c)?c:{default:()=>[c]})]);case"textarea":return u(v,null,[u("div",{class:"w-240px min-w-240px"},[u(xe,{value:a.value[s],"onUpdate:value":e=>a.value[s]=e,rows:1,placeholder:d},null)]),u("span",{class:"ml-10px"},[c])]);case"number":return u(v,null,[u("div",{class:"w-240px min-w-240px"},[u(oe,{value:a.value[s],"onUpdate:value":e=>a.value[s]=e,showButton:!1,placeholder:d},null)]),u("span",{class:"ml-10px"},[c])]);case"password":return u(v,null,[u("div",{class:"w-240px min-w-240px"},[u(_e,{value:a.value[s],"onUpdate:value":e=>a.value[s]=e,default:!0,placeholder:d},null)]),u("span",{class:"ml-10px"},[c])]);case"url":case"text":return u(v,null,[u("div",{class:"w-240px min-w-240px"},[u(pe,{value:a.value[s],"onUpdate:value":e=>a.value[s]=e,placeholder:d},null)]),u("span",{class:"ml-10px"},[c])])}return u(v,null,null)}(e,l))?s:{default:()=>[s]});var n})])}});const ze=n({name:"DependForm",props:{data:{type:Object,default:()=>({})},config:{type:Array,default:()=>[]}},emits:["close"],setup(e,{emit:a}){const{t:l}=p(),t=B(),s=d(e,"config"),n=i(e,"data"),o=r([]),c=r({});return(async()=>{const e=[];if(c.value={},o.value=[],s.value.forEach(a=>{const l=a.appname?a.appname[0]:null;n.value[a.apptype]={name:l,service_name:null},a.appname.forEach(l=>{c.value[l]={appName:l,appType:a.apptype,version:"",options:[]},o.value.push({label:l,value:l}),e.push({app_name:l,app_type:a.apptype})})}),0===e.length)return;const{message:a}=await(l={depend_app:e},I.post("/mod/docker/com/get_dependence_apps",{depend_app:JSON.stringify(l.depend_app)}));var l;L(a)&&T(a.data)&&a.data.forEach(e=>{const a=c.value[e.appname];a&&(a.options=e.installed.map(e=>({label:"".concat(e.service_name," ").concat(e.version),value:e.service_name})),n.value[e.app_type]&&n.value[e.app_type].name===e.appname&&e.installed.length>0&&(n.value[e.app_type].service_name=e.installed[0].service_name))})})(),()=>u(v,null,[s.value.map((e,p)=>{const i=n.value[e.apptype].name,r=c.value[i||""]||{appName:"",options:[]};return u(ne,{key:e.apptype,label:e.appTypeCN,class:0===p?"mt-20px":"",showFeedback:p!==s.value.length-1},{default:()=>[u("div",{class:"flex-1"},[u("div",{class:"flex items-center"},[r.appName?u("div",{class:"w-120px min-w-120px"},[u(re,{value:n.value[e.apptype].name,"onUpdate:value":[a=>n.value[e.apptype].name=a,()=>{const a=n.value[e.apptype].name,l=c.value[a||""]||{options:[]};l.options.length>0?n.value[e.apptype].service_name="".concat(l.options[0].value):n.value[e.apptype].service_name=null}],options:o.value},null)]):"",u("div",{class:"w-160px min-w-160px ml-8px"},[u(re,{value:n.value[e.apptype].service_name,"onUpdate:value":a=>n.value[e.apptype].service_name=a,options:r.options,disabled:0===r.options.length,placeholder:r.options.length>0?void 0:l("Docker.App.Install.index_8")},null)]),u("span",{class:"ml-8px"},[e.appDesc])]),0===r.options.length?u("div",{class:"mt-8px"},[u("a",{class:"bt-link",href:"javascript:;",onClick:()=>{(async e=>{const l=e.apptype,s=n.value[l].name,{message:p}=await ge({p:1,row:300,query:"",app_type:"all",force:0},!0);if(L(p)&&T(p.data)){const e=p.data.find(e=>e.appname===s);e&&(a("close"),t.setType(e.apptype),t.setRefresh(!0),Ue(e))}})(e)}},[l("Public.Btn.Install")])]):""])]})})])}}),Re={class:"p-20px py-24px"},Ie={class:"w-240px"},Ee={class:"w-160px"},qe=n({__name:"index",props:{app:{}},emits:["close"],setup(e,{expose:a,emit:l}){const s=l,n=d(e,"app"),{t:o}=p(),i=B(),c=f({service_name:"".concat(n.value.appname,"_").concat(N(4)),version:null}),v=r({}),m=r({}),w=r([]),A=()=>{s("close")};return w.value=[],n.value.appversion.forEach(e=>{e.s_version.length?e.s_version.forEach(a=>{w.value.push({label:"".concat(e.m_version,".").concat(a),value:"".concat(e.m_version,".").concat(a)})}):w.value.push({label:e.m_version,value:e.m_version})}),w.value.length>0&&(c.version=w.value[0].value?"".concat(w.value[0].value):null),a({onConfirm:async()=>{const e=(()=>{const{domain:e}=v.value;if($(e)&&e){const a=e.split("\n"),l=a.findIndex(e=>e.split(":")[0].length<3||e.split(":")[0].length>40);if(-1!==l)throw F.error(o("Docker.App.Install.index_4",[l+1])),new Error("validate");for(let e=0;e<a.length;e++)if(!V(a[e].split(":")[0]))throw F.error(o("Docker.App.Install.index_5",[e+1,a[e]])),new Error("validate")}const a=Object.entries(m.value),l=[];for(let n=0;n<a.length;n++){const[,e]=a[n];if(null===e.name||null===e.service_name)throw F.error(o("Docker.App.Install.index_6")),new Error("validate");l.push({appname:e.name,service_name:e.service_name})}const t=c.version||"",s=(e=>{if(!(e.indexOf(".")>-1))return null;const a=e.split(".");return 3===a.length?{x:a[0],yz:"".concat(a[1],".").concat(a[2])}:2===a.length?{x:a[0],yz:a[1]}:null})(t);return{...k(c),...k(v.value),app_name:n.value.appname,disable_domain:Number(!v.value.domain),allow_access:Number(v.value.allow_access),version:t,m_version:s?s.x:t,s_version:s?s.yz:"",...l.length>0?{depend_app:JSON.stringify(l)}:{}}})();var a;await(a=e,I.post("/mod/docker/com/create_app",a,{requestOptions:{loading:E.global.t("Docker.api.App.index_2"),successMessage:!0}})),i.setType("installed"),i.setRefresh(!0)}}),(e,a)=>{const l=pe,s=ne,p=re,o=t;return x(),_("div",Re,[u(o,{model:h(c),"label-width":"150"},{default:g(()=>[u(s,{label:e.$t("Docker.App.Install.index_1")},{default:g(()=>[b("div",Ie,[u(l,{value:h(c).service_name,"onUpdate:value":a[0]||(a[0]=e=>h(c).service_name=e),placeholder:e.$t("Docker.App.Install.index_2")},null,8,["value","placeholder"])])]),_:1},8,["label"]),u(s,{label:e.$t("Docker.App.Install.index_3")},{default:g(()=>[b("div",Ee,[u(p,{value:h(c).version,"onUpdate:value":a[1]||(a[1]=e=>h(c).version=e),options:h(w)},null,8,["value","options"])])]),_:1},8,["label"]),u(h(Pe),{data:h(v),"onUpdate:data":a[2]||(a[2]=e=>y(v)?v.value=e:null),config:h(n).field||[]},null,8,["data","config"]),u(h(ze),{data:h(m),"onUpdate:data":a[3]||(a[3]=e=>y(m)?m.value=e:null),config:h(n).depend||[],onClose:A},null,8,["data","config"])]),_:1},8,["model"])])}}}),Ue=e=>{Z({title:E.global.t("Docker.App.index_7",[e.apptitle]),width:800,footer:!0,data:{app:e},component:qe})},Te={class:"p-20px"},Me={key:1,class:"flex-center h-160px"},Be=n({__name:"index",props:{app:{}},setup(e){const a=d(e,"app");return(e,l)=>{const t=H,s=J,n=ce;return x(),_("div",Te,[h(a).appinfo?(x(),w(s,{key:0,class:"max-h-460px overflow-auto",column:1,bordered:!0,"label-placement":"left","label-style":{width:"180px",color:"#999"}},{default:g(()=>[(x(!0),_(v,null,A(h(a).appinfo,e=>(x(),w(t,{key:e.fieldKey,label:e.fieldTitle},{default:g(()=>[C(D(e.fieldValue),1)]),_:2},1032,["label"]))),128))]),_:1})):(x(),_("div",Me,[u(n)]))])}}});function Le(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!m(e)}const Ne=M({display:"grid",gap:"16px",gridTemplateColumns:"repeat(2, minmax(0, 1fr))",padding:"4px"}),$e=n({name:"DockerAppList",props:{loading:{type:Boolean,default:!1},data:{type:Object,default:()=>({install:[],installed:[]})}},setup(e){const a=B(),{type:l}=o(a),t=d(e,"data"),s=c(()=>"installed"===l.value?t.value.installed:t.value.install),n=c(()=>s.value.length>0);return()=>u(v,null,[j(u("div",{class:Ne},[u(W,{height:"140px"},null),u(W,{height:"140px"},null),u(W,{height:"140px"},null),u(W,{height:"140px"},null),u(W,{height:"140px"},null)]),[[S,e.loading]]),j(u("div",{class:Ne},[s.value.map(e=>u(Ve,{type:l.value,data:e},null))]),[[S,!e.loading&&n.value]]),j(u("div",{class:"pt-120px"},[u(ce,{size:"large"},null)]),[[S,!e.loading&&!n.value]])])}}),Fe=M({display:"flex",justifyContent:"space-between",padding:"16px",border:"1px solid var(--docker-plugin-list-border)",borderRadius:"4px",transition:"all .3s",boxShadow:"0 0 6px rgba(0, 0, 0, 0.15)","&:hover":{border:"1px solid #20a53a80"},".n-image":{display:"flex",alignItems:"center",justifyContent:"center",width:"46px",height:"46px",borderRadius:"50%",border:"1px solid #EEEEEE",boxShadow:"0 0 6px rgba(0, 0, 0, .15)"},".n-tag":{"--n-height":"24px"}}),Ve=n({name:"DockerAppItem",props:{type:{type:String,default:"all"},data:{type:Object,required:!0}},setup(e){const a=c(()=>{const a=e.data.appname.replace(/-+[{0-9},.,]+$/,"");return"".concat(G,"images/soft-ico/dkapp/ico-dkapp_").concat(a,".png")});return()=>u("div",{class:Fe},[u(ue,{class:"mr-12px",width:38,height:38,lazy:!0,src:a.value,"preview-disabled":!0,"object-fit":"contain"},null),He(e.type,e.data)])}});function He(e,a){return u("installed"===e?Ye:We,{data:a},null)}const Je=M({flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"128px",".label-tag":{"--n-color":"var(--docker-plugin-list-tag-gb)","--n-border":"1px solid #e9e9eb","--n-text-color":"#909399"}}),We=n({name:"DockerAppInstall",props:{data:{type:Object,required:!0}},setup(e){const a=d(e,"data"),{t:l}=p(),t=B();return()=>{let e;return u("div",{class:Je},[u("div",{class:"flex justify-between"},[u("div",{class:"flex-1 mr-16px"},[u("div",{class:"flex items-center"},[u("span",{class:"leading-22px text-16px font-600 text-default"},[a.value.apptitle]),a.value.installedCount?u("a",{class:"bt-link ml-12px",href:"javascript:;",onClick:()=>{t.setType("installed"),t.setRefresh(!0)}},[l("Docker.App.app_list_0",[a.value.installedCount])]):"",a.value.help?u("a",{class:"bt-link ml-12px",href:a.value.help,target:"_blank"},[">>"+l("Public.Btn.Help")]):""]),u("div",{class:"mt-8px text-default"},[a.value.appdesc||"--"])]),u(de,{type:"primary",secondary:!0,onClick:()=>{Ue(a.value)}},Le(e=l("Public.Btn.Install"))?e:{default:()=>[e]})]),u("div",{class:"flex flex-wrap gap-8px mt-8px"},[u(ve,{class:"label-tag"},{default:()=>[a.value.appTypeCN]})])])}}}),Ge=M({flex:1,display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"138px",".info-tag":{"--n-color":"var(--docker-plugin-list-tag-tips-bg)","--n-border":"1px solid #d3d4d6","--n-text-color":"#909399"},".n-button.error":{"--n-color-hover":"#fef0f0","--n-border-hover":"1px solid #fbc4c4","--n-border-focus":"1px solid #fbc4c4","--n-border-pressed":"1px solid #fbc4c4","--n-text-color-hover":"#f56c6c","--n-text-color-focus":"#fef0f0","--n-text-color-pressed":"#fef0f0"}}),Ke=M(e||(e=a(l(Qe=["\n\tanimation: rotating 2s linear infinite;\n\n\t@keyframes rotating {\n\t\t0% {\n\t\t\ttransform: rotate(0);\n\t\t}\n\t\t100% {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n"],"raw",{value:a(Xe||Qe.slice())}))));var Qe,Xe;const Ye=n({name:"DockerAppInstalled",props:{data:{type:Object,required:!0}},setup(e){const{t:a}=p(),l=d(e,"data"),t=B(),s=O(),n=c(()=>{const e=[a("Public.Status.Abnormal"),"warning"];switch(l.value.status){case"running":e[0]=a("Public.Status.Running"),e[1]="success";break;case"exited":e[0]=a("Public.Status.Stopped"),e[1]="error";break;case"initializing":e[0]=a("Docker.App.app_list_1"),e[1]="default"}return e}),o=()=>{Z({title:a("Docker.App.app_list_2"),width:820,height:556,data:{app:l.value},component:P(()=>X(()=>import("./index160.js?v=1760428868419"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])))})},i=new Map([["start",a("Public.Status.Start").toLocaleLowerCase()],["stop",a("Public.Status.Stop").toLocaleLowerCase()],["restart",a("Public.Status.Restart").toLocaleLowerCase()],["rebuild",a("Public.Btn.Rebuild").toLocaleLowerCase()]]),m=e=>{ee({title:a("Public.Confirm.Title"),content:a("Docker.App.app_list_4",[i.get(e),l.value.service_name]),onConfirm:async()=>{var a;await(a={service_name:l.value.service_name,app_name:l.value.appname,status:e},I.post("/mod/docker/com/set_app_status",a,{requestOptions:{loading:E.global.t("Docker.api.App.index_3"),successMessage:!0}})),t.setRefresh(!0)}})},f=()=>{const e=r(!1);ee({title:a("Public.Confirm.Title"),content:()=>{let t;return u(v,null,[u("div",{class:"mb-16px"},[a("Docker.App.app_list_6",[l.value.service_name])]),u(ie,{checked:e.value,"onUpdate:checked":a=>e.value=a},Le(t=a("Docker.App.app_list_8"))?t:{default:()=>[t]})])},onConfirm:async()=>{var a;await(a={id:l.value.id,delete_data:e.value?1:0},I.post("/mod/docker/com/remove_app",a,{requestOptions:{loading:E.global.t("Docker.api.App.index_4"),successMessage:!0}})),t.setRefresh(!0)}})};return()=>{let e,t,p,i,r,c,d;return u("div",{class:Ge},[u("div",{class:"flex justify-between"},[u("div",{class:"flex-1 mr-16px"},[u("div",{class:"flex items-center text-default"},[u("div",{class:"min-w-0 leading-22px text-16px text-default"},[u("div",{class:"max-w-full truncate",title:l.value.service_name},[l.value.service_name])]),u("div",{class:"ml-8px",onClick:()=>{"initializing"===l.value.status&&o()}},[u(ve,{type:n.value[1],class:"initializing"===l.value.status?"cursor-pointer":""},{default:()=>[n.value[0],"initializing"===l.value.status?u(U,{class:[Ke,"ml-4px"],name:"base-loading"},null):""]})]),u(me,null,{trigger:()=>u("div",{class:"ml-8px text-default hover:text-primary cursor-pointer",onClick:()=>{Q("Path",l.value.path),s.push("/files")}},[u(U,{name:"base-folder-open",size:18},null)]),default:()=>a("Docker.App.app_list_9")}),u(me,null,{trigger:()=>u("div",{class:"ml-8px text-default hover:text-primary cursor-pointer",onClick:()=>{o()}},[u(U,{name:"base-left-logs",size:18},null)]),default:()=>a("Docker.App.app_list_10")}),u("span",{class:"ml-8px"},[a("Docker.App.app_list_11"),l.value.createat])]),u("div",{class:"flex items-center gap-8px mt-8px"},[u(ve,{class:"info-tag",size:"small"},{default:()=>[a("Docker.App.app_list_12"),l.value.m_version+(l.value.s_version?".":"")+l.value.s_version]}),u(Ze,{port:l.value.port||[]},null)]),l.value.domain?u("div",{class:"flex items-center gap-8px mt-8px"},[u(me,null,{trigger:()=>u("div",{onClick:()=>{window.open("http://".concat(l.value.domain))}},[u(ve,{class:"info-tag cursor-pointer",size:"small"},{default:()=>[u(U,{class:"hover:text-primary",name:"base-max-black",size:"14"},null),u("span",{class:"ml-4px"},[a("Docker.App.app_list_14"),l.value.domain])]})]),default:()=>u("span",null,[a("Docker.App.app_list_15"),l.value.domain])}),u("a",{class:"bt-link",href:"javascript:;",onClick:()=>{s.push("/site/proxy")}},[">".concat(a("Docker.App.app_list_16"))])]):""]),u(de,{size:"small",onClick:()=>{Z({title:a("Docker.App.app_list_3"),width:920,minHeight:280,data:{app:l.value},component:P(()=>X(()=>import("./index161.js?v=1760428868419"),__vite__mapDeps([20,21,22,3,4,2,5,6,7,8,9,23,13,14,15,16,17,18,19,24])))})}},Le(e=a("Docker.App.app_list_17"))?e:{default:()=>[e]})]),u("div",null,[u(K,null,null),u("div",{class:"flex gap-10px mt-10px"},["exited"===l.value.status?u(de,{size:"small",onClick:()=>{m("start")}},Le(t=a("Public.Status.Start"))?t:{default:()=>[t]}):"","exited"!==l.value.status?u(de,{size:"small",onClick:()=>{m("stop")}},Le(p=a("Public.Status.Stop"))?p:{default:()=>[p]}):"",u(de,{size:"small",onClick:()=>{m("restart")}},Le(i=a("Public.Status.Restart"))?i:{default:()=>[i]}),u(de,{size:"small",onClick:()=>{Z({title:a("Docker.App.app_list_5"),width:640,data:{app:l.value},component:Be})}},Le(r=a("Public.Btn.Details"))?r:{default:()=>[r]}),u(de,{size:"small",class:"error",onClick:()=>{m("rebuild")}},Le(c=a("Public.Btn.Rebuild"))?c:{default:()=>[c]}),u(de,{size:"small",class:"error",onClick:()=>{f()}},Le(d=a("Public.Btn.Uninstall"))?d:{default:()=>[d]})])])])}}}),Ze=n({name:"PortTags",functional:!0,props:{port:{type:Array,default:()=>[]}},setup(e){const{t:a}=p(),l=c(()=>e.port.slice(0,2)),t=c(()=>e.port.slice(2));return()=>u(v,null,[l.value.map(e=>u(ve,{class:"info-tag",size:"small",key:e},{default:()=>[a("Docker.App.app_list_13"),e]})),t.value.length>0?u(me,null,{trigger:()=>u(ve,{class:"info-tag"},{default:()=>[C("+"),t.value.length]}),default:()=>t.value.join(a("Public.Punctuation.Comma"))}):""])}}),ea={class:"flex-1 flex items-center justify-between"},aa=Y(n({__name:"index",setup(e){const a=B(),{type:l,refresh:n}=o(a),p=r(),{height:i}=ae(p),{loading:c,setLoading:d}=le(),v=f({p:1,row:300,query:"",force:0}),m=f({install:[],installed:[]}),_=async()=>{try{d(!0),"installed"===l.value?await S():await j()}finally{d(!1)}},A=()=>({...k(v),app_type:"installed"===l.value?"all":l.value}),j=async()=>{const{message:e}=await ge(A());1===v.force&&(v.force=0),L(e)&&(m.install=T(e.data)?e.data:[],a.setMaxCpu(e.maximum_cpu),a.setMaxMemory(e.maximum_memory))},S=async()=>{const{message:e}=await((e,a=!1)=>I.post("/mod/docker/com/get_installed_apps",e,{requestOptions:{loading:a?E.global.t("Docker.api.App.index_1"):""}}))(A());L(e)&&(m.installed=T(e.data)?e.data:[])},O=()=>{v.p=1,_()},P=()=>{v.query="",O()},q=()=>{v.force=1,O()};return z(()=>n.value,e=>{e&&(a.setRefresh(!1),O())}),_(),(e,a)=>{const n=s,o=de,r=ne,d=t,f=fe;return x(),w(f,{class:"p-16px"},{default:g(()=>[u(d,{class:"mb-8px p-4px","label-align":"left","label-width":"0"},{default:g(()=>[u(r,{label:"","show-feedback":!1,"label-style":{paddingRight:"0"}},{default:g(()=>[u(n,{value:h(v).query,"onUpdate:value":a[0]||(a[0]=e=>h(v).query=e),width:460,prefix:!0,placeholder:e.$t("Docker.App.index_1"),onSearch:O},null,8,["value","placeholder"]),u(o,{type:"primary",class:"ml-10px",onClick:O},{default:g(()=>[C(D(e.$t("Public.Btn.Search")),1)]),_:1})]),_:1}),u(r,{class:"mt-20px",label:"","show-feedback":!1,"label-style":{paddingRight:"0"}},{default:g(()=>[b("div",ea,[u(h(De),{value:h(l),"onUpdate:value":[a[1]||(a[1]=e=>y(l)?l.value=e:null),P]},null,8,["value"]),u(o,{onClick:q},{default:g(()=>[C(D(e.$t("Docker.App.index_2")),1)]),_:1})])]),_:1})]),_:1}),b("div",{ref_key:"scrollbarRef",ref:p,class:"overflow-auto",style:R({height:h(i)})},[u(h($e),{loading:h(c),data:h(m)},null,8,["loading","data"])],4)]),_:1})}}}),[["__scopeId","data-v-ff0af478"]]),la=Object.freeze(Object.defineProperty({__proto__:null,default:aa},Symbol.toStringTag,{value:"Module"}));export{he as a,ye as b,ke as c,we as d,be as g,la as i,Ae as r,Ce as u};
