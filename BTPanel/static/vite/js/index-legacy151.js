System.register(["./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1760428868419","./public-legacy.js?v=1760428868419","./page_layout-legacy.js?v=1760428868419","./soft-legacy.js?v=1760428868419","./naive-legacy.js?v=1760428868419","./vue-legacy.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1760428868419","./common-legacy.js?v=1760428868419","./__commonjsHelpers__-legacy.js?v=1760428868419","./site-legacy.js?v=1760428868419"],function(e,t){"use strict";var a,l,i,n,s,o,c,d,p,u,_,y,r,m,g,f,k,h,b,w,x,j,v,C,R,S,B,D,U,z,L;return{setters:[e=>{a=e._},e=>{l=e._},e=>{i=e._},e=>{n=e.c,s=e.f,o=e.a,c=e.d,d=e.h},e=>{p=e.bj,u=e.n,_=e.fa,y=e.bg,r=e.fb,m=e.fc,g=e.d,f=e.x,k=e.bm},e=>{h=e.a},e=>{b=e.aC},e=>{w=e.k,x=e.P,j=e.e,v=e.N,C=e.R,R=e.V,S=e.W,B=e.a3,D=e.U,U=e.ak,z=e.j,L=e.a4},null,null,null,null],execute:function(){const t={class:"p-20px"};e("default",w({__name:"index",props:{data:{}},setup(e){const{t:w}=x(),F=e,{row:P}=F.data,T=p(),K=async()=>{await k(T.type,{id:P.id}),E(),T.setRefresh(!0)},H=j({p:1,limit:10,search:P.id}),{keys:N,table:V,columns:W}=n([{type:"selection",width:40},{key:"filename",title:w("Component.UploadFile.index_3"),ellipsis:{tooltip:{width:"trigger"}}},{key:"type",title:w("Ftp.Table.index_3"),width:80},{key:"size",title:w("Site.TableRow.index_23"),width:90,render:e=>u(e.size)},{key:"addtime",title:w("Site.TableRow.index_25"),width:146},s({width:180,options:e=>[{label:w("Public.Btn.Click"),show:"local disk"!==e.type,onClick:()=>{h({title:e.type,name:e.type,admin:!0})}},{label:w("Database.tools.index_3"),show:"local disk"===e.type,onClick:()=>{o({title:w("Database.tools.index_17"),content:w("Database.tools.index_18"),onConfirm:async({hide:t})=>{await _(T.type,{file:e.filename,name:P.name}),T.setRefresh(!0),t()}})}},{label:w("Ftp.Label.index_11"),show:"local disk"===e.type,onClick:()=>{y(e.filename,e.name)}},{label:w("Public.Btn.Del"),onClick:()=>{o({title:w("Site.Batch.index_18"),content:w("Database.tools.index_19"),onConfirm:async({hide:t})=>{await r({id:e.id}),E(),T.setRefresh(!0),t()}})}}]})]),$=[{key:"del",type:"confirm",label:w("Site.Batch.index_20"),confirm:{title:w("Site.Batch.index_21"),desc:w("Site.Batch.index_11"),columns:[W.value[1]],api:e=>r({id:e.id},!1),done:()=>{E()}}}],{loading:q,setLoading:A}=c(),E=async()=>{try{A(!0);const{message:e}=await m(v(H));g(e)?(V.data=e.data.map(e=>({...e,filename:e.filename.includes("|")?"/"+e.filename.split("|").slice(1).join("|"):e.filename,type:e.filename.includes("|")?e.filename.split("|")[0]:"local disk"})),V.total=f(e.page)):(V.data=[],V.total=0),P.backup_count=V.total}finally{N.value=[],A(!1)}};return E(),(e,n)=>{const s=b,o=d,c=i,p=l,u=a;return R(),C("div",t,[S(u,null,{toolsLeft:B(()=>[S(s,{class:"backup-btn",type:"primary",onClick:K},{default:B(()=>[z(L(e.$t("Database.index_16")),1)]),_:1})]),table:B(()=>[S(o,{"checked-row-keys":D(N),"onUpdate:checkedRowKeys":n[0]||(n[0]=e=>U(N)?N.value=e:null),loading:D(q),"loading-num":6,data:D(V).data,columns:D(W)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:B(()=>[S(c,{"checked-row-keys":D(N),"onUpdate:checkedRowKeys":n[1]||(n[1]=e=>U(N)?N.value=e:null),data:D(V).data,options:$},null,8,["checked-row-keys","data"])]),pageRight:B(()=>[S(p,{page:D(H).p,"onUpdate:page":n[2]||(n[2]=e=>D(H).p=e),"page-size":D(H).limit,"onUpdate:pageSize":n[3]||(n[3]=e=>D(H).limit=e),"item-count":D(V).total,onRefresh:E},null,8,["page","page-size","item-count"])]),_:1})])}}}))}}});
