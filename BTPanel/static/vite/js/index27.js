const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/index159.js?v=1760428868419","js/index.vue_vue_type_script_setup_true_lang.js?v=1760428868419","js/vue.js?v=1760428868419","js/__commonjsHelpers__.js?v=1760428868419","js/naive.js?v=1760428868419","js/common.js?v=1760428868419","js/page_layout.js?v=1760428868419","js/public.js?v=1760428868419","css/public.css?v=1760428868419","css/page_layout.css?v=1760428868419","js/index.vue_vue_type_script_setup_true_lang2.js?v=1760428868419","js/index98.js?v=1760428868419","css/index13.css?v=1760428868419","js/index132.js?v=1760428868419","js/index133.js?v=1760428868419","css/index23.css?v=1760428868419","js/soft.js?v=1760428868419","js/site.js?v=1760428868419"])))=>i.map(i=>d[i]);
import{i as a,o as e,bj as t,bm as s,bn as i,bq as n,d as o,w as l,x as d,q as p,a as r,bp as c}from"./page_layout.js?v=1760428868419";import{_}from"./index.js?v=1760428868419";import{_ as u}from"./index.vue_vue_type_script_setup_true_lang5.js?v=1760428868419";import{_ as m}from"./index.vue_vue_type_script_setup_true_lang7.js?v=1760428868419";import{_ as b}from"./index.vue_vue_type_script_setup_true_lang12.js?v=1760428868419";import{t as y,e as h,c as k,w as g,f,a as x,d as w,h as v,x as j}from"./public.js?v=1760428868419";import{_ as D}from"./index.vue_vue_type_script_setup_true_lang8.js?v=1760428868419";import{u as C,a as R,b as U,c as q,h as $,_ as B,d as P,e as S,f as W,g as L}from"./index132.js?v=1760428868419";import{g as z}from"./hooks.js?v=1760428868419";import{W as A,j as I,u as O,k as E,P as K,e as V,w as H,a2 as N,V as T,a3 as F,S as G,U as J,ak as M,a4 as Q,_ as X,N as Y}from"./vue.js?v=1760428868419";import{dS as Z,aC as aa}from"./naive.js?v=1760428868419";import"./common.js?v=1760428868419";import"./__commonjsHelpers__.js?v=1760428868419";import"./index.vue_vue_type_script_setup_true_lang6.js?v=1760428868419";import"./index133.js?v=1760428868419";import"./soft.js?v=1760428868419";import"./site.js?v=1760428868419";const{t:ea}=a.global;const ta={class:"p-16px"},sa=E({__name:"index",setup(a){const E=X(()=>r(()=>import("./index159.js?v=1760428868419"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),{t:sa}=K(),ia=t(),na=h(),oa=()=>{na.show=!0},la=()=>{W()},da=()=>{L()},pa=async()=>{await i(ia.type,{ids:[]}),ha()},ra=V({p:1,limit:10,sid:-1,search:""}),{keys:ca,table:_a,columns:ua}=k([{type:"selection",width:40},{key:"name",title:sa("Database.index_12"),width:"12%",minWidth:120},{key:"username",title:sa("Database.index_13"),width:"12%",minWidth:120},{key:"password",title:ea("Database.index_14"),minWidth:150,render:a=>A(y,{value:a.password},null)},{key:"backup_count",title:ea("Database.index_16"),width:"12%",render:a=>{let t;return A("div",{class:"flex items-center"},[A(e,{type:a.backup_count>0?"primary":"warning",onClick:()=>{C(a)}},{default:()=>[a.backup_count>0?"".concat(ea("Database.mongo.index_7"),"(").concat(a.backup_count,")"):ea("Database.index_18")]}),A("span",{class:"mx-4px"},[I("|")]),A(e,{onClick:()=>{R(a,"pgsql")}},(s=t=ea("Public.Btn.Import"),"function"==typeof s||"[object Object]"===Object.prototype.toString.call(s)&&!O(s)?t:{default:()=>[t]}))]);var s}},{key:"sid",title:ea("Database.mongo.index_8"),width:"12%",minWidth:120,render:a=>z(a)},g({onBlur:async(a,e)=>{await c({id:e.id,ps:a})}}),f({width:220,options:a=>[{label:"Adminer",show:0===a.db_type,onClick:()=>{ka(a)}},{label:"Password",onClick:()=>{U(a)}},{label:sa("Public.Btn.Del"),onClick:()=>{q([a])}}]})]),ma=[{key:"sync",label:sa("Database.index_24"),onBatch:a=>{x({title:sa("Database.index_25"),content:sa("Database.index_26"),onConfirm:async({hide:e})=>{await i(ia.type,{ids:a.map(a=>a.id)}),e()}})}},{key:"backup",type:"confirm",label:sa("Database.index_27"),confirm:{title:sa("Database.index_28"),desc:sa("Database.index_29"),api:a=>s(ia.type,{id:a.id},!1),done:()=>{ha()},columns:[{key:"name",title:sa("Database.index_12")}]}},{key:"delete",label:sa("Database.index_30"),onBatch:a=>{q(a)}}],{loading:ba,setLoading:ya}=w(),ha=async()=>{try{ya(!0);const{message:a}=await n(ia.type,(()=>{const a={...Y(ra)};return-1===a.sid&&delete a.sid,a})());o(a)?(_a.data=l(a.data)?a.data:[],_a.total=d(a.page)):(_a.data=[],_a.total=0)}finally{ca.value=[],ya(!1)}};H(()=>ia.isRefresh,a=>{a&&(ia.setRefresh(!1),ia.delRemoteId===ra.sid&&(ra.sid=-1),ha())});const ka=a=>{$(a?{type:"pgsql",username:a.username,password:a.password,db:a.name}:{type:"pgsql"})};return(async()=>{await ia.getRemote(),ia.install?ha():j()})(),(a,e)=>{const t=aa,s=p,i=D,n=v,o=b,l=m,d=u,r=_,c=Z;return T(),N(J(S),null,{default:F(()=>[A(c,null,{default:F(()=>[G("div",ta,[A(d,{feedback:!0},{toolsLeft:F(()=>[A(t,{type:"primary",onClick:oa},{default:F(()=>[I(Q(a.$t("Database.index_1")),1)]),_:1}),A(t,{onClick:la},{default:F(()=>[I(Q(a.$t("Database.index_2")),1)]),_:1}),A(t,{onClick:e[0]||(e[0]=a=>ka())},{default:F(()=>e[8]||(e[8]=[I(" Adminer ",-1)])),_:1,__:[8]}),A(t,{onClick:da},{default:F(()=>[I(Q(a.$t("Database.index_4")),1)]),_:1}),A(s,{class:"mx-0!",vertical:""}),A(t,{onClick:pa},{default:F(()=>[I(Q(a.$t("Database.index_5")),1)]),_:1}),A(t,{onClick:J(P)},{default:F(()=>[I(Q(a.$t("Database.index_6")),1)]),_:1},8,["onClick"])]),toolsRight:F(()=>[A(J(B),{value:J(ra).sid,"onUpdate:value":e[1]||(e[1]=a=>J(ra).sid=a),"store-key":"database-pgsql-page",onChange:ha},null,8,["value"]),A(i,{value:J(ra).search,"onUpdate:value":e[2]||(e[2]=a=>J(ra).search=a),placeholder:"Database search",onSearch:ha},null,8,["value"])]),table:F(()=>[A(n,{"checked-row-keys":J(ca),"onUpdate:checkedRowKeys":e[3]||(e[3]=a=>M(ca)?ca.value=a:null),loading:J(ba),data:J(_a).data,columns:J(ua)},null,8,["checked-row-keys","loading","data","columns"])]),pageLeft:F(()=>[A(o,{"checked-row-keys":J(ca),"onUpdate:checkedRowKeys":e[4]||(e[4]=a=>M(ca)?ca.value=a:null),data:J(_a).data,options:ma},null,8,["checked-row-keys","data"])]),pageRight:F(()=>[A(l,{page:J(ra).p,"onUpdate:page":e[5]||(e[5]=a=>J(ra).p=a),"page-size":J(ra).limit,"onUpdate:pageSize":e[6]||(e[6]=a=>J(ra).limit=a),"store-key":"database-pgsql-page","item-count":J(_a).total,onRefresh:ha},null,8,["page","page-size","item-count"])]),_:1}),A(r,{show:J(na).show,"onUpdate:show":e[7]||(e[7]=a=>J(na).show=a),title:a.$t("Database.mongo.index_4"),width:540,"min-height":280,footer:!0,component:J(E)},null,8,["show","title","component"])])]),_:1})]),_:1})}}});export{sa as default};
