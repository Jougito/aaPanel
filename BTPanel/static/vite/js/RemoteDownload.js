import{_ as e}from"./index.js?v=1760428868419";import{_ as a}from"./index.vue_vue_type_script_setup_true_lang.js?v=1760428868419";import{fU as l,t as o}from"./page_layout.js?v=1760428868419";import{b as t,g as r}from"./index39.js?v=1760428868419";import{k as i,P as s,i as u,r as n,av as d,a2 as p,V as m,a3 as v,S as f,W as _,U as w,ak as c}from"./vue.js?v=1760428868419";import{dR as h,au as j}from"./naive.js?v=1760428868419";import"./common.js?v=1760428868419";import"./__commonjsHelpers__.js?v=1760428868419";import"./public.js?v=1760428868419";import"./soft2.js?v=1760428868419";import"./soft.js?v=1760428868419";import"./site.js?v=1760428868419";import"./file2.js?v=1760428868419";import"./index.vue_vue_type_script_setup_true_lang7.js?v=1760428868419";const b={class:"p-20px pt-28px"},x={class:"w-320px"},D={class:"w-320px"},g={class:"w-320px"},M=i({__name:"RemoteDownload",setup(i,{expose:M}){const{t:R}=s(),U=u("fileStore"),{downloadFileFormData:y,currentPath:E}=U,k=n(!1),q=d("formRef"),F={url:{trigger:["input","blur"],validator:()=>y.value.url?!!l(y.value.url)||new Error(R("file.remoteDownloadModal.validation.urlInvalid")):new Error(R("file.remoteDownloadModal.validation.urlRequired"))},path:{trigger:["input","blur"],validator:()=>!!y.value.path||new Error(R("file.remoteDownloadModal.validation.pathRequired"))},filename:{trigger:["input","blur"],validator:()=>!!y.value.filename||new Error(R("file.remoteDownloadModal.validation.filenameRequired"))}},P=e=>{const a=e.split("/").pop();y.value.filename=a||""};M({open(){y.value.url="http://",y.value.path=E.value,y.value.filename="",k.value=!0},close(){k.value=!1}});const S=async()=>{var e;await(null==(e=q.value)?void 0:e.validate()),await o.post("/files?action=DownloadFile",{...y.value}),t(U),r(U)};return(l,o)=>{const t=j,r=h,i=a,s=e;return m(),p(s,{show:w(k),"onUpdate:show":o[3]||(o[3]=e=>c(k)?k.value=e:null),title:w(R)("file.remoteDownloadModal.title"),width:500,footer:!0,onConfirm:S},{default:v(()=>[f("div",b,[_(i,{ref_key:"formRef",ref:q,model:w(y),rules:F},{default:v(()=>[_(r,{label:w(R)("file.remoteDownloadModal.urlAddress"),path:"url"},{default:v(()=>[f("div",x,[_(t,{value:w(y).url,"onUpdate:value":[o[0]||(o[0]=e=>w(y).url=e),P]},null,8,["value"])])]),_:1},8,["label"]),_(r,{label:w(R)("file.remoteDownloadModal.downloadTo"),path:"path"},{default:v(()=>[f("div",D,[_(t,{value:w(y).path,"onUpdate:value":o[1]||(o[1]=e=>w(y).path=e)},null,8,["value"])])]),_:1},8,["label"]),_(r,{label:w(R)("file.remoteDownloadModal.fileName"),path:"filename"},{default:v(()=>[f("div",g,[_(t,{value:w(y).filename,"onUpdate:value":o[2]||(o[2]=e=>w(y).filename=e)},null,8,["value"])])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["show","title"])}}});export{M as default};
