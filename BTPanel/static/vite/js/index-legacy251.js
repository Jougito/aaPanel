System.register(["./index-legacy108.js?v=1760428868419","./index-legacy133.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy.js?v=1760428868419","./page_layout-legacy.js?v=1760428868419","./vue-legacy.js?v=1760428868419","./index-legacy87.js?v=1760428868419","./public-legacy.js?v=1760428868419","./domain-input-legacy.js?v=1760428868419","./site-legacy.js?v=1760428868419","./naive-legacy.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy17.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy10.js?v=1760428868419","./upload-legacy.js?v=1760428868419","./task-view.vue_vue_type_script_setup_true_lang-legacy.js?v=1760428868419","./common-legacy.js?v=1760428868419","./__commonjsHelpers__-legacy.js?v=1760428868419","./index-legacy.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy5.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy6.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy7.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy12.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy8.js?v=1760428868419","./index-legacy131.js?v=1760428868419","./php-legacy.js?v=1760428868419","./soft-legacy.js?v=1760428868419","./site-legacy4.js?v=1760428868419","./index.vue_vue_type_script_setup_true_lang-legacy15.js?v=1760428868419","./index-legacy245.js?v=1760428868419","./index-legacy99.js?v=1760428868419","./index-legacy100.js?v=1760428868419","./index-legacy101.js?v=1760428868419","./file-legacy.js?v=1760428868419","./theme-monokai-legacy.js?v=1760428868419","./refersh-legacy.js?v=1760428868419","./index-legacy105.js?v=1760428868419","./ssl-legacy.js?v=1760428868419","./cert-legacy.js?v=1760428868419","./ssl-lets-progress-legacy.js?v=1760428868419","./utils-legacy3.js?v=1760428868419","./index-legacy218.js?v=1760428868419","./paypal-js-legacy.js?v=1760428868419","./index-legacy98.js?v=1760428868419"],function(e,l){"use strict";var a,t,n,i,r,u,d,s,o,_,p,c,v,g,m,b,h,f,x,y,w,k,S,$,j,P,L,E,U,R,W,A,q,C,V,B,D,H,z,F,M,I,N,T,J,O,Q,Y,Z,G,K,X,ee,le,ae,te,ne,ie,re,ue;return{setters:[e=>{a=e._},e=>{t=e._},e=>{n=e._},e=>{i=e.w,r=e.e,u=e.g,d=e._,s=e.o,o=e.d,_=e.m},e=>{p=e.k,c=e.a0,v=e.ae,g=e.r,m=e.a2,b=e.V,h=e.U,f=e.n,x=e.w,y=e.c,w=e.P,k=e.e,S=e.a3,$=e.W,j=e.l,P=e.j,L=e.a4,E=e.ak,U=e.v,R=e.S,W=e.an,A=e.R},e=>{q=e.u,C=e.g,V=e.a,B=e.c,D=e.b,H=e.d},e=>{z=e.d,F=e.m,M=e._},e=>{I=e.D},e=>{N=e.g},e=>{T=e.dV,J=e.dR,O=e.dT,Q=e.dU,Y=e.au,Z=e.da,G=e.d8,K=e._,X=e.dj,ee=e.dZ,le=e.aC,ae=e.av,te=e.dY},e=>{ne=e._},e=>{ie=e._},e=>{re=e.o},e=>{ue=e._},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const l=p({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const l=q(),{phpVersion:a}=c(l),t=v(e,"value"),{loading:n,setLoading:r}=z(),u=g([]),d=e=>{a.value=e};return(async()=>{try{r(!0);const{message:e}=await N(),l=i(e)?e:[];u.value=l.filter(e=>"00"!==e.version).map(e=>({label:e.name,value:e.version})),await f(),l.length>0&&(t.value="00"==l[0].version?"":l[0].version,a.value="00"==l[0].version?"":l[0].version)}finally{r(!1)}})(),(e,l)=>{const a=T;return b(),m(a,{value:t.value,"onUpdate:value":[l[0]||(l[0]=e=>t.value=e),d],loading:h(n),options:h(u)},null,8,["value","loading","options"])}}}),de=p({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){const l=q();x(()=>l.phpVersion,e=>{d(e)});const a=y(()=>l.phpVersion?"Not supported by current PHP":"Please select PHP version"),t=v(e,"value"),{loading:n,setLoading:r}=z(),u=g([]),d=async e=>{try{r(!0),t.value="";const{message:l}=await C({php_version_short:e});i(l)&&(u.value=l.map(e=>({label:e.version,value:e.version})),await f(),l.length>0&&(t.value=l[0].version))}finally{r(!1)}};return l.phpVersion&&d(l.phpVersion),(e,l)=>{const i=T;return b(),m(i,{value:t.value,"onUpdate:value":l[0]||(l[0]=e=>t.value=e),loading:h(n),options:h(u),placeholder:h(a)},null,8,["value","loading","options","placeholder"])}}}),se={key:1},oe={class:"w-400px"},_e={class:"w-400px"},pe={class:"w-230px"},ce={class:"w-230px"},ve={class:"w-400px"},ge={class:"w-230px mr-16px"},me={class:"w-400px"},be={class:"w-400px"},he=p({__name:"index",props:{getList:{type:Function}},setup(e,{expose:a}){const i=e,{t:p}=w(),v=q(),{web:f,mysql:x,php:y}=c(v),C=g(null),B=g(null),D=g([]),H=k({type:0,domain_auto:[""],domain:"",weblog_title:"",language:"en",php_version:null,wp_version:null,user_name:u(6),admin_password:r(16,"wp"),pw_weak:!1,admin_email:"",Login_url:"wp-admin",redirection_url:"404",prefix:"wp_"+u(6)+"_",enable_cache:!1,wps:!1,is_create_default_file:!0}),z={domain:{required:!0,trigger:["blur","input"],validator:()=>0!==H.type||""!==H.domain.trim()||new Error(p("Site.RulesError.index_31"))},domain_auto:{trigger:["blur"],validator:(e,l)=>!(1===H.type&&!l[0])||new Error(p("Site.PHP.add_site_23"))},weblog_title:{required:!0,trigger:["blur","input"],validator:()=>""!==H.weblog_title.trim()||new Error(p("Site.RulesError.index_3"))},language:{trigger:"change",validator:()=>null!==H.language||new Error(p("Site.RulesError.index_4"))},php_version:{trigger:"change",validator:()=>null!==H.php_version||new Error(p("Site.RulesError.index_5"))},wp_version:{trigger:"change",validator:()=>null!==H.php_version||new Error(p("Site.RulesError.index_6"))},user_name:{required:!0,trigger:["blur","input"],validator:()=>""!==H.user_name.trim()||new Error(p("Site.RulesError.index_7"))},admin_password:{required:!0,trigger:["blur","input"],validator:()=>""!==H.admin_password.trim()||new Error(p("Site.RulesError.index_8"))},admin_email:{required:!0,trigger:["blur","input"],validator:()=>""!==H.admin_email.trim()||new Error(p("Site.RulesError.index_9"))},redirection_url:{required:!0,trigger:["blur","input"],validator:()=>""!==H.redirection_url.trim()||new Error(p("Site.RulesError.index_12"))},Login_url:{required:!0,trigger:["blur","input"],validator:()=>""!==H.Login_url.trim()||new Error(p("Site.RulesError.index_11"))},prefix:{required:!0,trigger:["blur","input"],validator:()=>""!==H.prefix.trim()||new Error(p("Site.RulesError.index_10"))}},M=e=>{if(C.value?.restoreValidation(),!e)return void(H.domain=H.domain_auto[0]);const l=H.domain.trim();l!==H.domain_auto[0]&&(H.domain_auto=l?[l]:[""],H.domain_auto.forEach((e,l)=>B.value?.onDomainItemBlur(e,l)))},N=()=>{const{domain:e,php_version:l}=H,a=e.replace(new RegExp(/([-.])/g),"_");if(null===l)throw _.error(p("Site.RulesError.index_5")),new Error(p("Site.RulesError.index_5"));const t=D.value.map(e=>({domain:e.domain,hash:e.hash,support:[...e.auto?["auto"]:[],...e.ssl_cert?["ssl_cert"]:[],...e.cf_proxy?["cf_proxy"]:[]]}));return{webname:{domain:e,domainlist:[],count:0},type:"PHP",port:80,type_id:0,ftp:!1,sql:"MySQL",codeing:"utf8",set_ssl:0,force_ssl:0,project_type:"WP",path:v.sitePath+"/"+(0===H.type?e:H.domain_auto[0]),ps:a,version:l,datauser:"sql_"+a,datapassword:u(16),password:H.admin_password,pw_weak:H.pw_weak?"on":"off",email:H.admin_email,weblog_title:H.weblog_title,language:H.language,user_name:H.user_name,prefix:H.prefix,enable_cache:H.enable_cache?1:0,enable_whl:0,whl_page:H.Login_url?H.Login_url:null,whl_redirect_admin:H.redirection_url?H.redirection_url:null,package_version:H.wp_version,wp_parse_list:1===H.type&&t.length?JSON.stringify(t):null,is_create_default_file:H.is_create_default_file}},T=()=>new Promise((e,l)=>{0===D.value.filter(e=>e.support.includes("auto")).length&&1===H.type?(_.error("This domain does not support automatic resolution, please choose manual resolution"),l(!1)):e(!0)});return a({onConfirm:async()=>{await T(),await(C.value?.validate());const{message:e}=await V(N());o(e)&&i.getList()}}),(e,a)=>{const i=s,r=Q,u=O,o=d,_=J,p=Y,c=G,v=Z,g=K,w=X,k=n,q=t;return b(),m(q,{install:h(x).setup&&h(y).setup},{desc:S(()=>[R("span",null,L(e.$t("WP.index_6")),1),h(y).setup?W("",!0):(b(),m(i,{key:0,class:"ml-4px",onClick:a[0]||(a[0]=e=>h(F)("php-8.0"))},{default:S(()=>[P(L(e.$t("WP.index_7")),1)]),_:1})),h(x).setup?W("",!0):(b(),A("span",se,[a[17]||(a[17]=R("span",{class:"mx-4px"},"|",-1)),$(i,{onClick:a[1]||(a[1]=e=>h(F)("mysql"))},{default:S(()=>[P(L(e.$t("WP.index_8")),1)]),_:1})]))]),default:S(()=>[$(k,{ref_key:"formRef",ref:C,model:h(H),rules:z},{default:S(()=>[$(_,{label:e.$t("SSL.index_1")},{default:S(()=>[$(u,{value:h(H).type,"onUpdate:value":[a[2]||(a[2]=e=>h(H).type=e),M]},{default:S(()=>[$(r,{value:0},{default:S(()=>[P(L(e.$t("SSL.index_2")),1)]),_:1}),$(r,{value:1},{default:S(()=>[P(L(e.$t("SSL.index_3")),1)]),_:1})]),_:1},8,["value"]),$(o,{name:"ssl-stars",size:22})]),_:1},8,["label"]),j($(_,{label:e.$t("Site.Lable.index_1"),path:"domain_auto"},{default:S(()=>[$(I,{ref_key:"domainInputRef",ref:B,value:h(H).domain_auto,"onUpdate:value":a[3]||(a[3]=e=>h(H).domain_auto=e),"parse-list":h(D),"onUpdate:parseList":a[4]||(a[4]=e=>E(D)?D.value=e:null),is_wp:""},null,8,["value","parse-list"])]),_:1},8,["label"]),[[U,1===h(H).type]]),j($(_,{label:e.$t("Site.Lable.index_1"),path:"domain"},{default:S(()=>[R("div",oe,[$(p,{value:h(H).domain,"onUpdate:value":a[5]||(a[5]=e=>h(H).domain=e),placeholder:e.$t("Site.Placeholder.index_12")},null,8,["value","placeholder"])])]),_:1},8,["label"]),[[U,0===h(H).type]]),$(_,{label:e.$t("Site.Lable.index_20"),path:"weblog_title"},{default:S(()=>[R("div",_e,[$(p,{value:h(H).weblog_title,"onUpdate:value":a[6]||(a[6]=e=>h(H).weblog_title=e),placeholder:e.$t("Site.Placeholder.index_13")},null,8,["value","placeholder"])])]),_:1},8,["label"]),$(_,{label:e.$t("Site.Lable.index_21"),path:"language"},{default:S(()=>[R("div",pe,[$(ne,{value:h(H).language,"onUpdate:value":a[7]||(a[7]=e=>h(H).language=e)},null,8,["value"])])]),_:1},8,["label"]),$(_,{label:e.$t("Site.Lable.index_22"),path:"php_version"},{default:S(()=>[R("div",ce,[$(l,{value:h(H).php_version,"onUpdate:value":a[8]||(a[8]=e=>h(H).php_version=e)},null,8,["value"])])]),_:1},8,["label"]),$(_,{label:e.$t("Site.Lable.index_23"),path:"wp_version"},{default:S(()=>[$(v,{class:"items-center",size:8},{default:S(()=>[$(de,{value:h(H).wp_version,"onUpdate:value":a[9]||(a[9]=e=>h(H).wp_version=e),class:"w-230px"},null,8,["value"]),$(c,{trigger:"hover"},{trigger:S(()=>[$(o,{name:"common-ask",size:"18",color:"#999"})]),default:S(()=>[P(" "+L(e.$t("WP.Add.index_8")),1)]),_:1})]),_:1})]),_:1},8,["label"]),$(_,{label:e.$t("Site.Lable.index_24"),path:"user_name"},{default:S(()=>[R("div",ve,[$(p,{value:h(H).user_name,"onUpdate:value":a[10]||(a[10]=e=>h(H).user_name=e),placeholder:e.$t("Site.Placeholder.index_14")},null,8,["value","placeholder"])])]),_:1},8,["label"]),$(_,{label:e.$t("Site.Lable.index_27"),path:"admin_password"},{default:S(()=>[R("div",ge,[$(p,{value:h(H).admin_password,"onUpdate:value":a[11]||(a[11]=e=>h(H).admin_password=e),placeholder:e.$t("Site.Placeholder.index_15")},null,8,["value","placeholder"])]),$(g,{checked:h(H).pw_weak,"onUpdate:checked":a[12]||(a[12]=e=>h(H).pw_weak=e)},{default:S(()=>[R("span",null,L(e.$t("WP.Add.index_9")),1)]),_:1},8,["checked"])]),_:1},8,["label"]),$(_,{label:e.$t("Site.Lable.index_28"),path:"admin_email"},{default:S(()=>[R("div",me,[$(p,{value:h(H).admin_email,"onUpdate:value":a[13]||(a[13]=e=>h(H).admin_email=e),placeholder:e.$t("Site.Placeholder.index_16")},null,8,["value","placeholder"])])]),_:1},8,["label"]),$(_,{label:e.$t("Site.Lable.index_29"),path:"prefix"},{default:S(()=>[R("div",be,[$(p,{value:h(H).prefix,"onUpdate:value":a[14]||(a[14]=e=>h(H).prefix=e),placeholder:e.$t("Site.Placeholder.index_17")},null,8,["value","placeholder"])])]),_:1},8,["label"]),$(_,{label:e.$t("Site.Lable.index_31"),"show-feedback":!1},{default:S(()=>[$(g,{checked:h(H).enable_cache,"onUpdate:checked":a[15]||(a[15]=e=>h(H).enable_cache=e),disabled:"nginx"!==h(f).type},{default:S(()=>[R("span",null,L(e.$t("WP.Add.index_10")),1)]),_:1},8,["checked","disabled"])]),_:1},8,["label"]),$(_,{label:e.$t("SSL.SiteSSL.index_18")},{default:S(()=>[$(w,{value:h(H).is_create_default_file,"onUpdate:value":a[16]||(a[16]=e=>h(H).is_create_default_file=e)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["install"])}}}),fe={key:1},xe={class:"w-302px ml-12px"},ye={class:"w-302px ml-12px"},we={class:"w-400px"},ke={class:"w-230px"},Se=p({__name:"index",props:{getList:{type:Function}},setup(e,{expose:a}){const{t:i}=w(),r=q(),{web:u,mysql:d,php:o}=c(r),_=e,p=g(null),v=g(null),f=g(null),x=k({method:1,bak_file:"",domain:"",sub_path:"",php_version:null,enable_cache:!1,db_bak_file:""}),j={bak_file:{trigger:["blur","input"],validator:()=>""!==x.bak_file.trim()||new Error(i("WP.Add.import_6"))},domain:{trigger:["blur","input"],validator:()=>""!==x.domain.trim()||new Error(i("Site.RulesError.index_31"))},php_version:{trigger:"change",validator:()=>null!==x.php_version||new Error(i("Site.RulesError.index_5"))},db_bak_file:{trigger:["blur","input"],validator:()=>""!==x.db_bak_file.trim()||new Error(i("WP.Add.import_6"))}},U=y(()=>x.domain?`/${x.domain}/`:"/"),C=e=>{const l="/www/server/panel/temp";re({path:l,uploadData:{multiple:!1},onUploadSuccess:a=>{"wp"===e?(x.bak_file=`${l}/${a[0].name}`,V()):"db"===e&&(x.db_bak_file=`${l}/${a[0].name}`,z())}})},V=()=>{v.value?.restoreValidation()},z=()=>{f.value?.restoreValidation()};return a({onConfirm:async()=>{await(p.value?.validate());const e=3===x.method?{db_bak_file:x.db_bak_file,bak_file:x.bak_file,domain:x.domain,sub_path:x.sub_path,php_ver_short:x.php_version||"",enable_cache:x.enable_cache?1:0}:{bak_file:x.bak_file,domain:x.domain,sub_path:x.sub_path,php_ver_short:x.php_version||"",enable_cache:x.enable_cache?1:0};1===x.method?await B(e):2===x.method?await D(e):3===x.method&&await H(e),_.getList()}}),(e,a)=>{const i=s,_=ee,c=O,g=J,y=le,w=ie,k=Y,q=te,B=ae,D=K,H=n,I=M,N=t;return b(),m(N,{install:h(d).setup&&h(o).setup},{desc:S(()=>[R("span",null,L(e.$t("WP.index_6")),1),h(o).setup?W("",!0):(b(),m(i,{key:0,class:"ml-4px",onClick:a[0]||(a[0]=e=>h(F)("php-8.0"))},{default:S(()=>[P(L(e.$t("WP.index_7")),1)]),_:1})),h(d).setup?W("",!0):(b(),A("span",fe,[a[12]||(a[12]=R("span",{class:"mx-4px"},"|",-1)),$(i,{onClick:a[1]||(a[1]=e=>h(F)("mysql"))},{default:S(()=>[P(L(e.$t("WP.index_8")),1)]),_:1})]))]),default:S(()=>[$(H,{ref_key:"formRef",ref:p,modelValue:h(x),"onUpdate:modelValue":a[11]||(a[11]=e=>E(x)?x.value=e:null),rules:j},{default:S(()=>[$(g,{label:e.$t("WP.Add.import_1")},{default:S(()=>[$(c,{value:h(x).method,"onUpdate:value":a[2]||(a[2]=e=>h(x).method=e)},{default:S(()=>[$(_,{label:e.$t("WP.Add.import_2"),value:1},null,8,["label"]),$(_,{label:e.$t("WP.Add.import_3"),value:2},null,8,["label"]),$(_,{label:"Manual Backup",value:3})]),_:1},8,["value"])]),_:1},8,["label"]),$(g,{ref_key:"bakFileRef",ref:v,label:"WP backup file",path:"bak_file"},{default:S(()=>[$(y,{onClick:a[3]||(a[3]=e=>C("wp"))},{default:S(()=>[P(L(e.$t("Docker.App.Backup.index_3")),1)]),_:1}),R("div",xe,[$(w,{value:h(x).bak_file,"onUpdate:value":a[4]||(a[4]=e=>h(x).bak_file=e),"default-path":"/www/backup/wordpress","checked-type":["file"],onChange:V},null,8,["value"])])]),_:1},512),3===h(x).method?(b(),m(g,{key:0,ref_key:"dbBakFileRef",ref:f,label:"DB backup file",path:"db_bak_file"},{default:S(()=>[$(y,{onClick:a[5]||(a[5]=e=>C("db"))},{default:S(()=>[P(L(e.$t("Docker.App.Backup.index_3")),1)]),_:1}),R("div",ye,[$(w,{value:h(x).db_bak_file,"onUpdate:value":a[6]||(a[6]=e=>h(x).db_bak_file=e),"default-path":"/www/backup/wordpress","checked-type":["file"],onChange:z},null,8,["value"])])]),_:1},512)):W("",!0),$(g,{label:e.$t("Site.Lable.index_1"),path:"domain"},{default:S(()=>[R("div",we,[$(k,{value:h(x).domain,"onUpdate:value":a[7]||(a[7]=e=>h(x).domain=e),placeholder:e.$t("Site.Placeholder.index_12")},null,8,["value","placeholder"])])]),_:1},8,["label"]),$(g,{label:e.$t("Site.PHP.add_site_9"),path:"path"},{default:S(()=>[$(B,{class:"w-400px"},{default:S(()=>[$(q,null,{default:S(()=>[P(L(h(r).sitePath)+L(h(U)),1)]),_:1}),$(k,{value:h(x).sub_path,"onUpdate:value":a[8]||(a[8]=e=>h(x).sub_path=e),placeholder:e.$t("WP.Add.import_5")},null,8,["value","placeholder"])]),_:1})]),_:1},8,["label"]),$(g,{label:e.$t("Site.Lable.index_22"),path:"php_version"},{default:S(()=>[R("div",ke,[$(l,{value:h(x).php_version,"onUpdate:value":a[9]||(a[9]=e=>h(x).php_version=e)},null,8,["value"])])]),_:1},8,["label"]),$(g,{label:e.$t("Site.Lable.index_31"),"show-feedback":!1},{default:S(()=>[$(D,{checked:h(x).enable_cache,"onUpdate:checked":a[10]||(a[10]=e=>h(x).enable_cache=e),disabled:"nginx"!==h(u).type},{default:S(()=>[P(L(e.$t("WP.Add.index_10")),1)]),_:1},8,["checked","disabled"])]),_:1},8,["label"])]),_:1},8,["modelValue"]),3===h(x).method?(b(),m(I,{key:0},{default:S(()=>a[13]||(a[13]=[R("li",null," Manual backup deployment relies on the wp-config.php file, please ensure that it exists and is configured correctly. ",-1)])),_:1,__:[13]})):W("",!0)]),_:1},8,["install"])}}}),$e={class:"p-20px h-full"};e("default",p({__name:"index",props:{done:{type:Function}},setup(e,{expose:l}){const{t:t}=w(),n=e,i=g("single"),r=g(),u=[{key:"single",label:t("WP.Add.index_1"),isLazy:!0,component:he,data:{getList:n.done}},{key:"import",label:t("WP.Add.index_2"),isLazy:!0,component:Se,data:{getList:n.done}}];return l({onConfirm:async()=>{await(r.value?.onConfirm())}}),(e,l)=>{const t=a;return b(),m(ue,{title:e.$t("WP.Add.index_7"),params:"backup_deploy"},{default:S(()=>[R("div",$e,[$(t,{ref_key:"tabsRef",ref:r,value:h(i),"onUpdate:value":l[0]||(l[0]=e=>E(i)?i.value=e:null),options:u},null,8,["value"])])]),_:1},8,["title"])}}}))}}});
